<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ìš©ì ë“±ë¡/ê´€ë¦¬</title>
    <!-- Tailwind CSS CDNì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤íƒ€ì¼ë§ì„ ì ìš©í•©ë‹ˆë‹¤. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header-bar {
            background-color: #e5e7eb;
            padding: 0.5rem 1rem;
            border-bottom: 1px solid #d1d5db;
        }
        .header-bar span {
            font-weight: 500;
        }
        .btn {
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .btn-blue {
            background-color: #3b82f6;
            color: white;
        }
        .btn-blue:hover {
            background-color: #2563eb;
        }
        .btn-gray {
            background-color: #e5e7eb;
            color: #4b5563;
        }
        .btn-gray:hover {
            background-color: #d1d5db;
        }
        .form-input {
            width: 100%;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db;
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }
        .grid-header {
            background-color: #dbeafe;
            color: #1e40af;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
        }
        .form-section {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 1rem;
            background-color: white;
        }
        /* ë¼ë²¨ í…ìŠ¤íŠ¸ í¬ê¸° ì¡°ì •ì„ ìœ„í•œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ */
        .form-label {
            font-size: 0.75rem;
        }
        /* ë‚ ì§œ ì…ë ¥ ì•„ì´ì½˜ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ */
        .date-input-container {
            position: relative;
            width: 100%;
        }
        .date-input-container input[type="date"] {
            padding-right: 2rem;
        }
        .date-input-container::after {
            content: "ğŸ“…";
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #4b5563;
        }
        /* ì‚¬ìš©ìê·¸ë£¹ ë¼ë²¨ì„ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” í´ë˜ìŠ¤ */
        .user-group-label {
            color: #ef4444;
        }
        /* ì¶”ê°€ì •ë³´ ì„¹ì…˜ì„ ìˆ¨ê¸°ê¸° ìœ„í•œ í´ë˜ìŠ¤ */
        .hidden-section {
            display: none;
        }
        /* ê·¸ë¦¬ë“œ í…Œì´ë¸” í–‰ ìŠ¤íƒ€ì¼ */
        .user-row {
            cursor: pointer;
        }
        .user-row:hover {
            background-color: #f3f4f6;
        }
        .user-row.selected {
            background-color: #dbeafe;
            color: #1e40af;
            font-weight: 600;
        }

        /* íŒì—… ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }

        /* ê²€í† ì˜ê²¬ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .review-section {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 1rem;
            background-color: white;
            margin-top: 1rem;
        }
        .comment-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .comment-item:last-child {
            border-bottom: none;
        }
        .delete-btn {
            background-color: #ef4444;
            color: white;
            padding: 0.1rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            transition: background-color 0.2s;
        }
        .delete-btn:hover {
            background-color: #dc2626;
        }
    </style>
    <!-- Firebase SDKë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. -->
    <!-- ì‚¬ìš©ìì˜ ìš”ì²­ì— ë”°ë¼ 12.1.0 ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ -->
    <script type="module" src="https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js"></script>
</head>
<body class="bg-gray-100 p-4">

    <!-- ì´ˆê¸° ë©”ì‹œì§€ íŒì—… ëª¨ë‹¬ -->
    <div id="initialMessageModal" class="modal-overlay">
        <div class="modal-content">
            <h2 class="text-xl font-bold mb-4">ì‚¬ì´íŠ¸ ì•ˆë‚´</h2>
            <p class="text-gray-700 mb-4">
                ë³¸ ì‚¬ì´íŠ¸ëŠ” í™”ë©´ êµ¬ì„±ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•œ ê°€ìƒ ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.<br>
                ì‚¬ìš©ìê·¸ë£¹(ë¶‰ì€ìƒ‰)ì„ ë³€ê²½í•˜ë©´ ì‚¬ìš©ì ì¶”ê°€ì •ë³´ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
            <div class="flex items-center justify-center mb-4 text-sm">
                <input type="checkbox" id="doNotShowAgain" class="mr-2">
                <label for="doNotShowAgain">ì•ìœ¼ë¡œ ë³´ì´ì§€ ì•Šê¸°</label>
            </div>
            <button id="closeModalBtn" class="btn btn-blue w-full">ë‹«ê¸°</button>
        </div>
    </div>

    <!-- ì‚­ì œ í™•ì¸ íŒì—… ëª¨ë‹¬ -->
    <div id="deleteConfirmationModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 class="text-xl font-bold mb-4">ì‚­ì œ í™•ì¸</h2>
            <p class="text-gray-700 mb-6">ì •ë§ ì‚­ì œí•˜ì‹œê² ì–´ìš”?</p>
            <div class="flex justify-center space-x-4">
                <button id="confirmDeleteYesBtn" class="btn btn-blue w-1/3">ì˜ˆ</button>
                <button id="confirmDeleteNoBtn" class="btn btn-gray w-1/3">ì•„ë‹ˆì˜¤</button>
            </div>
        </div>
    </div>

    <!-- Header Section -->
    <div class="header-bar flex items-center justify-between rounded-t-lg">
        <div class="flex items-center space-x-2 text-sm">
            <span>ì‚¬ì—…ê´€ë¦¬ > ì‚¬ìš©ì ë“±ë¡/ê´€ë¦¬</span>
        </div>
        <div class="flex items-center space-x-2">
            <button class="btn btn-blue" id="newBtn">ì‹ ê·œ</button>
            <button class="btn btn-blue" id="searchBtn">ì¡°íšŒ</button>
            <button class="btn btn-blue" id="saveBtn">ì €ì¥</button>
            <button class="btn btn-blue" id="excelBtn">ì—‘ì…€</button>
        </div>
    </div>

    <!-- Main Content Container -->
    <div class="container p-4 bg-white rounded-b-lg shadow-lg">
        <!-- Top Filters Section -->
        <div class="flex items-center space-x-4 mb-4 text-sm">
            <div class="flex items-center space-x-2">
                <span class="form-label">ê¸°ê´€ìœ í˜•</span>
                <select class="form-input w-28" id="agencyTypeSelect">
                    <option>ë³´ê±´ì†Œ</option>
                </select>
            </div>
            <div class="flex items-center space-x-2">
                <span class="form-label">ì§€ì—­</span>
                <select class="form-input w-28" id="regionSelect">
                    <option>ì„œìš¸íŠ¹ë³„ì‹œ</option>
                </select>
            </div>
            <div class="flex items-center space-x-2">
                <span class="form-label">ê¸°ê´€</span>
                <select class="form-input w-28" id="agencySelect">
                    <option>ì „ì²´</option>
                </select>
            </div>
            <div class="flex items-center space-x-2">
                <span class="form-label">ì‚¬ìš©ìëª…</span>
                <input type="text" class="form-input w-28" id="userNameInput">
            </div>
            <div class="flex items-center space-x-2">
                <!-- ì‚¬ìš©ìê·¸ë£¹ í•„í„° ì½¤ë³´ë°•ìŠ¤ì— ìƒˆë¡œìš´ ì˜µì…˜ì„ ì ìš©í•©ë‹ˆë‹¤. -->
                <span class="form-label">ì‚¬ìš©ìê·¸ë£¹</span>
                <select class="form-input w-28" id="userGroupFilterSelect">
                    <option value="ì „ì²´">ì „ì²´</option>
                    <option value="ì‹œìŠ¤í…œê´€ë¦¬">ì‹œìŠ¤í…œê´€ë¦¬</option>
                    <option value="ì‚¬ì—…ìš´ì˜ì">ì‚¬ì—…ìš´ì˜ì</option>
                    <option value="ì‹œë„ ë‹´ë‹¹ì">ì‹œë„ ë‹´ë‹¹ì</option>
                    <option value="ì—…ë¬´ë‹´ë‹¹ì">ì—…ë¬´ë‹´ë‹¹ì</option>
                    <option value="ê¸ˆì—°ìƒë‹´ì‚¬">ê¸ˆì—°ìƒë‹´ì‚¬</option>
                    <option value="ê¸ˆì—°ì§€ë„ì›">ê¸ˆì—°ì§€ë„ì›</option>
                    <option value="ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›">ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›</option>
                    <option value="ê¸ˆì—°ì¡°ì‚¬ì›">ê¸ˆì—°ì¡°ì‚¬ì›</option>
                    <option value="í•™êµì„ ìƒë‹˜">í•™êµì„ ìƒë‹˜</option>
                    <option value="ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì">ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì</option>
                </select>
            </div>
            <div class="flex items-center space-x-2">
                <span class="form-label">ì‚¬ìš©ììœ ë¬´</span>
                <select class="form-input w-28" id="userStatusSelect">
                    <option>ì „ì²´</option>
                </select>
            </div>
        </div>

        <!-- Two Column Layout -->
        <div class="grid grid-cols-[1fr_1.15fr] md:grid-cols-[1fr_1.15fr] gap-4">
            <!-- Left Column: User List Grid -->
            <div>
                <div class="flex items-center justify-between mb-2">
                    <span class="font-bold text-lg">ì‚¬ìš©ì ë¦¬ìŠ¤íŠ¸</span>
                    <div class="flex items-center text-sm space-x-2">
                        <input type="checkbox" id="manage_target">
                        <label for="manage_target">ê´€ë¦¬ëŒ€ìƒìˆ˜</label>
                        <button class="btn btn-gray">í‡´ì‚¬ì ì¡°íšŒ</button>
                    </div>
                </div>
                <!-- ì‚¬ìš©ì ë¦¬ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•  ì˜ì—­ -->
                <div id="userListGrid" class="bg-white p-2 border border-gray-300 rounded-md overflow-y-auto" style="height: 400px;">
                    <!-- Table header -->
                    <div class="grid grid-cols-4 text-xs font-bold text-gray-700 p-2 border-b border-gray-300">
                        <div>ì‚¬ìš©ìID</div>
                        <div>ì´ë¦„</div>
                        <div>ì¡°ì§ëª…</div>
                        <div>ì‚¬ìš©ìê·¸ë£¹</div>
                    </div>
                    <!-- ë°ì´í„°ê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë  ì˜ì—­ -->
                </div>
                <!-- ê²€í† ì˜ê²¬ ì…ë ¥ ì˜ì—­ ì¶”ê°€ -->
                <div class="review-section mt-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-lg"><p style="color: red;">í™”ë©´ ê²€í† ì˜ê²¬ ì…ë ¥</p></span>
                        <button id="addCommentBtn" class="btn btn-blue">ì¶”ê°€</button>
                    </div>
                    <textarea id="commentInput" class="form-input mb-2" rows="3" placeholder="ì˜ê²¬ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                    <div id="commentList" class="overflow-y-auto" style="max-height: 150px;">
                        <!-- ëŒ“ê¸€ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>

            <!-- Right Column: User Details and Registration Form -->
            <div>
                <!-- User Details Section -->
                <div class="form-section mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-lg">ì‚¬ìš©ì ìƒì„¸ì •ë³´</span>
                        <div class="flex items-center text-red-500 text-sm">
                            <span class="mr-1">â€»</span> ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”
                        </div>
                    </div>
                    <!-- Updated layout for user details to ensure labels are in one line -->
                    <div class="grid grid-cols-2 gap-2 text-sm items-center">
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ê³„ì •ìœ í˜•</span>
                            <select class="form-input w-3/4" id="accountTypeSelect">
                                <option>ì„ íƒ</option>
                                <option>ê°œì¸</option>
                                <option>ì¡°ì§</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">íœ´ë©´ê³„ì •</span>
                            <div class="flex w-3/4 space-x-1">
                                <button class="btn btn-gray" id="dormantBtn">í•´ì œ</button>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì—…ë¬´êµ¬ë¶„</span>
                            <!-- ì—…ë¬´êµ¬ë¶„ ì½¤ë³´ë°•ìŠ¤ì— ìƒˆë¡œìš´ ì˜µì…˜ì„ ì ìš©í•©ë‹ˆë‹¤. -->
                            <select class="form-input w-3/4" id="businessDivisionSelect">
                                <option>ì„ íƒ</option>
                                <option>ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰</option>
                                <option>êµ°ì˜ê²½ ê¸ˆì—°ì‚¬ì—…</option>
                                <option>ë‹¨ê¸°ê¸ˆì—°ìº í”„</option>
                                <option>ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤</option>
                                <option>í•™êµí¡ì—°ì˜ˆë°©ì‚¬ì—…</option>
                                <option>ë‹´ë°°ë§ˆì¼€íŒ… ëª¨ë‹ˆí„°ë§</option>
                                <option>ê¸ˆì—°ìƒë‹´ì „í™”</option>
                                <option>ê¸ˆì—°ì¹˜ë£Œ ê±´ê°•ë³´í—˜ ì§€ì›ì‚¬ì—…</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ìëª…</span>
                            <input type="text" class="form-input w-3/4" id="detailUserNameInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ìID</span>
                            <input type="text" class="form-input w-3/4" id="detailUserIdInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">I-PIN ID</span>
                            <input type="text" class="form-input w-3/4" id="ipinIdInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì¡°ì§ëª…</span>
                            <input type="text" class="form-input w-3/4" id="orgNameInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ê³ ìš©í˜•íƒœ</span>
                            <select class="form-input w-3/4" id="employmentTypeSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <!-- ì‚¬ìš©ìê·¸ë£¹ ìƒì„¸ì •ë³´ ì½¤ë³´ë°•ìŠ¤ì— ìƒˆë¡œìš´ ì˜µì…˜ì„ ì ìš©í•©ë‹ˆë‹¤. -->
                            <span class="form-label text-right w-1/4 user-group-label">ì‚¬ìš©ìê·¸ë£¹</span>
                            <select id="userGroupSelect" class="form-input w-3/4">
                                <option value="ì„ íƒ">ì„ íƒ</option>
                                <option value="ì‹œìŠ¤í…œê´€ë¦¬">ì‹œìŠ¤í…œê´€ë¦¬</option>
                                <option value="ì‚¬ì—…ìš´ì˜ì">ì‚¬ì—…ìš´ì˜ì</option>
                                <option value="ì‹œë„ ë‹´ë‹¹ì">ì‹œë„ ë‹´ë‹¹ì</option>
                                <option value="ì—…ë¬´ë‹´ë‹¹ì">ì—…ë¬´ë‹´ë‹¹ì</option>
                                <option value="ê¸ˆì—°ìƒë‹´ì‚¬">ê¸ˆì—°ìƒë‹´ì‚¬</option>
                                <option value="ê¸ˆì—°ì§€ë„ì›">ê¸ˆì—°ì§€ë„ì›</option>
                                <option value="ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›">ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›</option>
                                <option value="ê¸ˆì—°ì¡°ì‚¬ì›">ê¸ˆì—°ì¡°ì‚¬ì›</option>
                                <option value="í•™êµì„ ìƒë‹˜">í•™êµì„ ìƒë‹˜</option>
                                <option value="ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì">ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì§ê¸‰</span>
                            <select class="form-input w-3/4" id="jobTitleSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì„±ë³„</span>
                            <select class="form-input w-3/4" id="genderSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‹ ê·œ/ê²½ë ¥</span>
                            <select class="form-input w-3/4" id="careerTypeSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ê²½ë ¥</span>
                            <input type="text" class="form-input w-1/2" id="careerInput">
                            <span class="form-label">ê°œì›”</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì§€ì†ê³ ìš©</span>
                            <select class="form-input w-3/4" id="continuousEmploymentSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì•½ê´€ë™ì˜</span>
                            <select class="form-input w-3/4" id="termsAgreementSelect">
                                <option>ë¯¸ë™ì˜</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ìœ ë¬´</span>
                            <select class="form-input w-3/4" id="usageStatusSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìœ </span>
                            <input type="text" class="form-input w-3/4" id="reasonInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ì‹œì‘ì¼</span>
                            <input type="text" class="form-input w-3/4" id="startDateInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ì¢…ë£Œì¼</span>
                            <input type="text" class="form-input w-3/4" id="endDateInput">
                        </div>
                        <div class="col-span-2 text-xs text-gray-500 mt-2">
                            <span>- ëŠ” ì „ë¬¸ì¸ë ¥ í•„ìˆ˜ì…ë ¥ì…ë‹ˆë‹¤.</span>
                        </div>
                    </div>
                </div>

                <!-- ì‚¬ìš©ì(ê¸ˆì—°ìƒë‹´ì‚¬) ì¶”ê°€ì •ë³´ Section -->
                <div id="additionalInfoSection" class="form-section mb-4 hidden-section">
                    <span class="font-bold text-lg block mb-2">ì‚¬ìš©ì(ê¸ˆì—°ìƒë‹´ì‚¬) ì¶”ê°€ì •ë³´</span>
                    <div class="grid grid-cols-2 gap-2 text-sm items-center">
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ìƒë…„ì›”ì¼</span>
                            <div class="date-input-container w-3/4">
                                <input type="date" class="form-input" id="dobInput">
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì§ìœ„/ì§ê¸‰</span>
                            <input type="text" class="form-input w-3/4" id="positionInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ìµœì¢…í•™ìœ„</span>
                            <select class="form-input w-3/4" id="finalDegreeSelect">
                                <option>ì„ íƒ</option>
                                <option>ê³ ì¡¸</option>
                                <option>ëŒ€ì¡¸</option>
                                <option>ëŒ€í•™ì›ì„ì‚¬ì¡¸</option>
                                <option>ëŒ€í•™ì›ë°•ì‚¬ì¡¸</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì „ê³µë¶„ì•¼</span>
                            <select class="form-input w-3/4" id="majorFieldSelect">
                                <option>ì„ íƒ</option>
                                <option>ì˜í•™</option>
                                <option>ê°„í˜¸í•™</option>
                                <option>ë³´ê±´í•™</option>
                                <option>ìƒë‹´í•™</option>
                                <option>ì‹¬ë¦¬í•™</option>
                                <option>êµìœ¡í•™</option>
                                <option>ê¸°íƒ€</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ìƒë‹´ ê´€ë ¨ ìê²©ì¦<br>ë³´ìœ  ì—¬ë¶€</span>
                            <input type="text" class="form-input w-3/4" id="counselingLicenseInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì„œë¹„ìŠ¤ ìƒë‹´ ê²½ë ¥</span>
                            <select class="form-input w-3/4" id="serviceCareerSelect">
                                <option>ì„ íƒ</option>
                                <option>ìƒë‹´ì „í™”</option>
                                <option>ë³´ê±´ì†Œ</option>
                                <option>ê¸ˆì—°ìº í”„</option>
                                <option>ì°¾ê¸ˆ</option>
                                <option>êµ°ì˜ê²½</option>
                                <option>ë³‘ì˜ì›</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ìƒë‹´ì—…ë¬´ ì‹œì‘ì¼</span>
                            <div class="date-input-container w-3/4">
                                <input type="date" class="form-input" id="counselingStartDateInput">
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">êµìœ¡ ì´ìˆ˜ ì—¬ë¶€</span>
                            <div class="flex w-3/4 space-x-2">
                                <select id="educationSelect" class="form-input w-3/5">
                                    <option>ì„ íƒ</option>
                                    <option>ê¸°ì´ˆ</option>
                                    <option>ê¸°ë³¸</option>
                                    <option>ì‹¬í™”</option>
                                    <option>ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)</option>
                                </select>
                                <div id="fileUploadContainer" class="hidden-section flex-1">
                                    <input type="file" class="form-input">
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì „í™”ë²ˆí˜¸</span>
                            <input type="text" class="form-input w-3/4" id="phoneInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì´ë©”ì¼</span>
                            <input type="email" class="form-input w-3/4" id="emailInput">
                        </div>
                    </div>
                </div>

                <!-- Management Target Section -->
                <div class="form-section">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-lg">ê´€ë¦¬ ëŒ€ìƒì</span>
                        <button class="btn btn-gray" id="changeCounselorBtn">ìƒë‹´ì‚¬ ë³€ê²½</button>
                    </div>
                    <!-- Placeholder for management target list -->
                    <div class="bg-white p-2 border border-gray-300 rounded-md" style="height: 200px;">
                        <!-- Table header placeholder -->
                        <div class="grid grid-cols-2 text-xs font-bold text-gray-700 p-2 border-b border-gray-300">
                            <div>ë“±ë¡ë²ˆí˜¸</div>
                            <div>ì´ë¦„</div>
                        </div>
                        <!-- Table row placeholder -->
                        <div class="grid grid-cols-2 text-xs p-2 hover:bg-gray-100">
                            <div>123456789</div>
                            <div>ê¹€ì˜í¬</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ Firebase SDK ë²„ì „ 12.1.0ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, doc, deleteDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";
        // getAnalyticsëŠ” ì´ ì˜ˆì œì—ì„œ ì§ì ‘ ì‚¬ìš©ë˜ì§€ ì•Šì§€ë§Œ, ì‚¬ìš©ìê°€ ì œê³µí–ˆìœ¼ë¯€ë¡œ ê°€ì ¸ì˜¤ë„ë¡ ìœ ì§€í•©ë‹ˆë‹¤.
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js";

        // ì‚¬ìš©ìë¡œë¶€í„° ì œê³µëœ Firebase ì„¤ì • ê°ì²´ì…ë‹ˆë‹¤.
        const firebaseConfig = {
            apiKey: "AIzaSyCxqhUmiPOCkdwDfbI8-Q6k7hyutQEIQEI",
            authDomain: "ttt1-9c767.firebaseapp.com",
            projectId: "ttt1-9c767",
            storageBucket: "ttt1-9c767.firebasestorage.app",
            messagingSenderId: "146279854885",
            appId: "1:146279854885:web:6760890c2802c9506fa0cc",
            measurementId: "G-DSL8FJRC6K"
        };
        
        // ëŒ“ê¸€ ì €ì¥ì„ ìœ„í•œ ì•± IDëŠ” projectIdë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
        const appId = firebaseConfig.projectId; 

        let db;
        let auth;
        let userId = 'anonymous'; // ì´ˆê¸° ì‚¬ìš©ì ID, ì¸ì¦ í›„ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
        let commentToDeleteId = null; // ì‚­ì œí•  ëŒ“ê¸€ì˜ IDë¥¼ ì„ì‹œ ì €ì¥í•©ë‹ˆë‹¤.

        document.addEventListener('DOMContentLoaded', async (event) => {
            // Firebase ì´ˆê¸°í™” ë° ì¸ì¦
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                // getAnalyticsëŠ” ì—¬ê¸°ì—ì„œ ì´ˆê¸°í™”í•  ìˆ˜ ìˆì§€ë§Œ, í˜„ì¬ ê¸°ëŠ¥ì—ëŠ” ì§ì ‘ì ìœ¼ë¡œ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                // const analytics = getAnalytics(app);
                
                // ì™¸ë¶€ ë„ë©”ì¸ì—ì„œëŠ” Canvas í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ìµëª… ë¡œê·¸ì¸ ì‹œë„
                await signInAnonymously(auth);
            } catch (error) {
                console.error("Firebase ì´ˆê¸°í™” ë˜ëŠ” ì¸ì¦ ì˜¤ë¥˜:", error);
                // Firebase: Error (auth/configuration-not-found) ì˜¤ë¥˜ëŠ” ì£¼ë¡œ Firebase ì½˜ì†”ì—ì„œ
                // 'Authentication' > 'ì„¤ì •' íƒ­ì˜ 'ìŠ¹ì¸ëœ ë„ë©”ì¸'ì— í˜„ì¬ ì›¹ì‚¬ì´íŠ¸ ë„ë©”ì¸ì´
                // ì¶”ê°€ë˜ì§€ ì•Šì•˜ì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.
                // ì˜ˆë¥¼ ë“¤ì–´, 'https://ggawoos-bot.github.io'ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
                // ì´ ë¶€ë¶„ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
            }
            
            // ì¸ì¦ ìƒíƒœ ë³€í™” ê°ì§€ ë° userId ì„¤ì •
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    userId = user.uid;
                    console.log("Firebase ì¸ì¦ ì„±ê³µ. User ID:", userId);
                } else {
                    console.log("Firebase ì¸ì¦ ì‹¤íŒ¨ ë˜ëŠ” ë¡œê·¸ì•„ì›ƒ. ìµëª…ìœ¼ë¡œ ë¡œê·¸ì¸.");
                    userId = 'anonymous'; // ìµëª… ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ anonymousë¡œ ìœ ì§€
                }
                // Firebase ì´ˆê¸°í™” ë° ì¸ì¦ì´ ì™„ë£Œëœ í›„ ê²€í†  ì˜ê²¬ ê¸°ëŠ¥ ì‹œì‘
                // ì´ í•¨ìˆ˜ëŠ” 'db'ì™€ 'auth' ê°ì²´ê°€ ìœ íš¨í•  ë•Œë§Œ í˜¸ì¶œë©ë‹ˆë‹¤.
                if (db && auth) {
                    initCommentsFeature();
                } else {
                    console.error("Firebase Firestore ë˜ëŠ” Authê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•„ ê²€í†  ì˜ê²¬ ê¸°ëŠ¥ì„ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }
            });

            // ì´ˆê¸° ë©”ì‹œì§€ íŒì—… ê´€ë ¨ ìš”ì†Œ
            const modal = document.getElementById('initialMessageModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const doNotShowAgainCheckbox = document.getElementById('doNotShowAgain');
            const storageKey = 'showInitialMessage';

            // ì‚­ì œ í™•ì¸ ëª¨ë‹¬ ê´€ë ¨ ìš”ì†Œ
            const deleteConfirmationModal = document.getElementById('deleteConfirmationModal');
            const confirmDeleteYesBtn = document.getElementById('confirmDeleteYesBtn');
            const confirmDeleteNoBtn = document.getElementById('confirmDeleteNoBtn');


            // í•„í„° ë° ë¦¬ìŠ¤íŠ¸ ê´€ë ¨ ìš”ì†Œ
            const newBtn = document.getElementById('newBtn');
            const searchBtn = document.getElementById('searchBtn');
            const userListGrid = document.getElementById('userListGrid');
            const userNameInput = document.getElementById('userNameInput');
            const userGroupFilterSelect = document.getElementById('userGroupFilterSelect');
            const excelBtn = document.getElementById('excelBtn'); // ì—‘ì…€ ë²„íŠ¼ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°

            // ìƒì„¸ ì •ë³´ ë° ì¶”ê°€ ì •ë³´ ê´€ë ¨ ìš”ì†Œ
            const detailUserIdInput = document.getElementById('detailUserIdInput');
            const detailUserNameInput = document.getElementById('detailUserNameInput');
            const accountTypeSelect = document.getElementById('accountTypeSelect');
            const businessDivisionSelect = document.getElementById('businessDivisionSelect');
            const ipinIdInput = document.getElementById('ipinIdInput');
            const orgNameInput = document.getElementById('orgNameInput'); 
            const employmentTypeSelect = document.getElementById('employmentTypeSelect');
            const userGroupSelect = document.getElementById('userGroupSelect');
            const jobTitleSelect = document.getElementById('jobTitleSelect');
            const genderSelect = document.getElementById('genderSelect');
            const careerTypeSelect = document.getElementById('careerTypeSelect');
            const careerInput = document.getElementById('careerInput');
            const continuousEmploymentSelect = document.getElementById('continuousEmploymentSelect');
            const termsAgreementSelect = document.getElementById('termsAgreementSelect');
            const usageStatusSelect = document.getElementById('usageStatusSelect');
            const reasonInput = document.getElementById('reasonInput');
            const startDateInput = document.getElementById('startDateInput');
            const endDateInput = document.getElementById('endDateInput');
            const additionalInfoSection = document.getElementById('additionalInfoSection');
            const dobInput = document.getElementById('dobInput');
            const positionInput = document.getElementById('positionInput');
            const finalDegreeSelect = document.getElementById('finalDegreeSelect');
            const majorFieldSelect = document.getElementById('majorFieldSelect');
            const counselingLicenseInput = document.getElementById('counselingLicenseInput');
            const serviceCareerSelect = document.getElementById('serviceCareerSelect');
            const counselingStartDateInput = document.getElementById('counselingStartDateInput');
            const educationSelect = document.getElementById('educationSelect');
            const phoneInput = document.getElementById('phoneInput');
            const emailInput = document.getElementById('emailInput');
            const fileUploadContainer = document.getElementById('fileUploadContainer');
            
            // ê²€í† ì˜ê²¬ ê´€ë ¨ ìš”ì†Œ
            const addCommentBtn = document.getElementById('addCommentBtn');
            const commentInput = document.getElementById('commentInput');
            const commentList = document.getElementById('commentList');

            // ê°€ìƒ í…ŒìŠ¤íŠ¸ ë°ì´í„°
            const testUsers = [
                { id: 'user_01', name: 'ê¹€ë¯¼ì¤€', org: 'ìš©ì‚°êµ¬ë³´ê±´ì†Œ', group: 'ì‹œìŠ¤í…œê´€ë¦¬', accountType: 'ê°œì¸', dormant: false, business: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipin: '1234-5678', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_02', name: 'ì´ì„œì—°', org: 'ì„±ë™êµ¬ë³´ê±´ì†Œ', group: 'ì—…ë¬´ë‹´ë‹¹ì', accountType: 'ì¡°ì§', dormant: false, business: 'í•™êµí¡ì—°ì˜ˆë°©ì‚¬ì—…', ipin: '', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_03', name: 'ë°•ì„œì¤€', org: 'ê°•ë‚¨êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', dormant: false, business: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipin: '2345-6789', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì‹ ê·œ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1985-05-20', position: 'ìƒë‹´ì‚¬', degree: 'ëŒ€ì¡¸', major: 'ìƒë‹´í•™', license: 'ìƒë‹´ì‹¬ë¦¬ì‚¬ 2ê¸‰', serviceCareer: 'ìƒë‹´ì „í™”', counselingStart: '2022-01-10', education: 'ê¸°ë³¸', phone: '010-9876-5432', email: 'park.sj@example.com' },
                { id: 'user_04', name: 'ìµœì§€ìš°', org: 'ì€í‰êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'ë‹´ë°°ë§ˆì¼€íŒ… ëª¨ë‹ˆí„°ë§', ipin: '3456-7890', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_05', name: 'ê¹€ë¯¼ì§€', org: 'ë§ˆí¬êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'ê¸ˆì—°ì¹˜ë£Œ ê±´ê°•ë³´í—˜ ì§€ì›ì‚¬ì—…', ipin: '4567-8901', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ê²½ë ¥', career: '24', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1992-11-03', position: 'ì£¼ë¬´ê´€', degree: 'ëŒ€ì¡¸', major: 'ê°„í˜¸í•™', license: 'êµ­ê°€ê³µì¸ìê²©ì¦', serviceCareer: 'ë³´ê±´ì†Œ', counselingStart: '2021-07-01', education: 'ì‹¬í™”', phone: '010-1111-2222', email: 'kim.mj2@example.com' },
                { id: 'user_06', name: 'ë°•í•˜ì€', org: 'ê°•ì„œêµ¬ë³´ê±´ì†Œ', group: 'ì—…ë¬´ë‹´ë‹¹ì', accountType: 'ê°œì¸', dormant: false, business: 'ê¸ˆì—°ìƒë‹´ì „í™”', ipin: '5678-9012', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_07', name: 'ì´ë„ìœ¤', org: 'ë…¸ì›êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ì¡°ì§', dormant: false, business: 'ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤', ipin: '6789-0123', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ê²½ë ¥', career: '60', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1978-08-25', position: 'íŒ€ì¥', degree: 'ëŒ€í•™ì›ì„ì‚¬ì¡¸', major: 'ë³´ê±´í•™', license: 'ë³´ê±´êµì‚¬ ìê²©ì¦', serviceCareer: 'ì°¾ê¸ˆ', counselingStart: '2018-05-15', education: 'ì‹¬í™”', phone: '010-3333-4444', email: 'lee.dy@example.com' },
                { id: 'user_08', name: 'ì •ìˆ˜ì•„', org: 'ë™ì‘êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'êµ°ì˜ê²½ ê¸ˆì—°ì‚¬ì—…', ipin: '7890-1234', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_09', name: 'í•œì§€ë¯¼', org: 'ì„œì´ˆêµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'ë‹¨ê¸°ê¸ˆì—°ìº í”„', ipin: '8901-2345', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì‹ ê·œ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1995-02-14', position: 'ì „ë¬¸ê°€', degree: 'ê³ ì¡¸', major: 'ê¸°íƒ€', license: 'ì»´í“¨í„°í™œìš©ëŠ¥ë ¥ 1ê¸‰', serviceCareer: 'ê¸ˆì—°ìº í”„', counselingStart: '2023-09-01', education: 'ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)', phone: '010-5555-6666', email: 'han.jm@example.com' },
                { id: 'user_10', name: 'ì˜¤ì„¸í›ˆ', org: 'ì¤‘êµ¬ë³´ê±´ì†Œ', group: 'ì‹œë„ ë‹´ë‹¹ì', accountType: 'ì¡°ì§', dormant: false, business: 'ê¸ˆì—°ì¹˜ë£Œ ê±´ê°•ë³´í—˜ ì§€ì›ì‚¬ì—…', ipin: '9012-3456', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_11', name: 'ì´ì§€ì•„', org: 'ì¢…ë¡œêµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', dormant: false, business: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipin: '9013-4567', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ê²½ë ¥', career: '12', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1988-07-22', position: 'ìƒë‹´ì‚¬', degree: 'ëŒ€ì¡¸', major: 'ìƒë‹´í•™', license: 'ì§ì—…ìƒë‹´ì‚¬ 2ê¸‰', serviceCareer: 'ìƒë‹´ì „í™”', counselingStart: '2021-03-01', education: 'ê¸°ë³¸', phone: '010-7777-8888', email: 'lee.ja@example.com' },
                { id: 'user_12', name: 'ê¹€íƒœí˜¸', org: 'ê°•ë¶êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'ë‹´ë°°ë§ˆì¼€íŒ… ëª¨ë‹ˆí„°ë§', ipin: '9014-5678', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_13', name: 'ë°•ì§€ì€', org: 'ë„ë´‰êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'í•™êµí¡ì—°ì˜ˆë°©ì‚¬ì—…', ipin: '9015-6789', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì‹ ê·œ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1998-04-12', position: 'ì‚¬ì›', degree: 'ê³ ì¡¸', major: 'ê¸°íƒ€', license: 'ìš´ì „ë©´í—ˆì¦', serviceCareer: 'í•™êµ', counselingStart: '2024-01-01', education: 'ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)', phone: '010-9999-0000', email: 'park.je@example.com' },
                { id: 'user_14', name: 'ì¥ë™ê±´', org: 'ê´‘ì§„êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ì¡°ì§', dormant: false, business: 'ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤', ipin: '9016-7890', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ê²½ë ¥', career: '36', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1980-09-03', position: 'ê³¼ì¥', degree: 'ëŒ€í•™ì›ì„ì‚¬ì¡¸', major: 'ì˜í•™', license: 'ì˜ì‚¬ë©´í—ˆ', serviceCareer: 'ì°¾ê¸ˆ', counselingStart: '2019-06-20', education: 'ì‹¬í™”', phone: '010-2222-3333', email: 'jang.dg@example.com' },
                { id: 'user_15', name: 'ìµœìœ¤ì•„', org: 'ì„±ë¶êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', dormant: false, business: 'êµ°ì˜ê²½ ê¸ˆì—°ì‚¬ì—…', ipin: '9017-8901', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì‹ ê·œ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1996-10-28', position: 'ìƒë‹´ì‚¬', degree: 'ëŒ€ì¡¸', major: 'ì‹¬ë¦¬í•™', license: 'ì„ìƒì‹¬ë¦¬ì‚¬ 2ê¸‰', serviceCareer: 'êµ°ì˜ê²½', counselingStart: '2023-11-15', education: 'ê¸°ë³¸', phone: '010-4444-5555', email: 'choi.ya@example.com' },
                { id: 'user_16', name: 'í™ê¸¸ë™', org: 'ìš©ì‚°êµ¬ë³´ê±´ì†Œ', group: 'ì‹œìŠ¤í…œê´€ë¦¬', accountType: 'ê°œì¸', dormant: false, business: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipin: '1111-2222', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_17', name: 'ê³ ì€ë³„', org: 'ë§ˆí¬êµ¬ë³´ê±´ì†Œ', group: 'ì‚¬ì—…ìš´ì˜ì', accountType: 'ì¡°ì§', dormant: false, business: 'ë‹¨ê¸°ê¸ˆì—°ìº í”„', ipin: '1111-3333', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_18', name: 'ì‹ ë¯¼ì•„', org: 'ê°•ë‚¨êµ¬ë³´ê±´ì†Œ', group: 'ì‹œë„ ë‹´ë‹¹ì', accountType: 'ê°œì¸', dormant: false, business: 'ê¸ˆì—°ì¹˜ë£Œ ê±´ê°•ë³´í—˜ ì§€ì›ì‚¬ì—…', ipin: '1111-4444', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_19', name: 'ì´ë¯¼í˜¸', org: 'ì€í‰êµ¬ë³´ê±´ì†Œ', group: 'ì—…ë¬´ë‹´ë‹¹ì', accountType: 'ì¡°ì§', dormant: false, business: 'ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤', ipin: '1111-5555', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_20', name: 'ê¹€ìˆ˜í˜„', org: 'ë…¸ì›êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ì¡°ì‚¬ì›', accountType: 'ê°œì¸', dormant: false, business: 'ë‹´ë°°ë§ˆì¼€íŒ… ëª¨ë‹ˆí„°ë§', ipin: '1111-6666', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_21', name: 'ì •í•´ì¸', org: 'ì„œì´ˆêµ¬ë³´ê±´ì†Œ', group: 'í•™êµì„ ìƒë‹˜', accountType: 'ê°œì¸', dormant: false, business: 'í•™êµí¡ì—°ì˜ˆë°©ì‚¬ì—…', ipin: '1111-7777', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_22', name: 'ì†ì˜ˆì§„', org: 'ì¤‘êµ¬ë³´ê±´ì†Œ', group: 'ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì', accountType: 'ì¡°ì§', dormant: false, business: 'êµ°ì˜ê²½ ê¸ˆì—°ì‚¬ì—…', ipin: '1111-8888', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_23', name: 'ì†¡í˜œêµ', org: 'ë§ˆí¬êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', dormant: false, business: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipin: '9018-9012', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ê²½ë ¥', career: '18', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1981-02-28', position: 'ìƒë‹´ì‚¬', degree: 'ëŒ€ì¡¸', major: 'ë³´ê±´í•™', license: 'ê°„í˜¸ì‚¬ ë©´í—ˆ', serviceCareer: 'ë³´ê±´ì†Œ', counselingStart: '2020-09-01', education: 'ê¸°ë³¸', phone: '010-6666-7777', email: 'song.hk@example.com' },
                { id: 'user_24', name: 'í˜„ë¹ˆ', org: 'ê°•ë‚¨êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'ê¸ˆì—°ì¹˜ë£Œ ê±´ê°•ë³´í—˜ ì§€ì›ì‚¬ì—…', ipin: '9019-0123', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì‹ ê·œ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1982-09-25', position: 'íŒ€ì›', degree: 'ëŒ€í•™ì›ì„ì‚¬ì¡¸', major: 'ìƒë‹´í•™', license: 'ìƒë‹´ì‹¬ë¦¬ì‚¬ 1ê¸‰', serviceCareer: 'ë³‘ì˜ì›', counselingStart: '2023-01-20', education: 'ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)', phone: '010-8888-9999', email: 'hyun.b@example.com' },
                { id: 'user_25', name: 'ê¹€ì†Œí˜„', org: 'ìš©ì‚°êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', dormant: false, business: 'ê¸ˆì—°ìƒë‹´ì „í™”', ipin: '9020-1234', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ê²½ë ¥', career: '48', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1999-06-04', position: 'ìƒë‹´ì‚¬', degree: 'ëŒ€ì¡¸', major: 'ì‹¬ë¦¬í•™', license: 'êµ­ê°€ì „ë¬¸ìê²©', serviceCareer: 'ìƒë‹´ì „í™”', counselingStart: '2019-05-01', education: 'ì‹¬í™”', phone: '010-1234-9876', email: 'kim.sh@example.com' },
                { id: 'user_26', name: 'ë‚¨ì£¼í˜', org: 'ì„±ë™êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'ë‹´ë°°ë§ˆì¼€íŒ… ëª¨ë‹ˆí„°ë§', ipin: '9021-2345', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì„ íƒ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '' },
                { id: 'user_27', name: 'ì´ì¢…ì„', org: 'ê°•ì„œêµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ì¡°ì§', dormant: false, business: 'êµ°ì˜ê²½ ê¸ˆì—°ì‚¬ì—…', ipin: '9022-3456', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ê²½ë ¥', career: '24', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1989-09-14', position: 'ì£¼ë¬´ê´€', degree: 'ëŒ€í•™ì›ì„ì‚¬ì¡¸', major: 'ë³´ê±´í•™', license: 'ë³´ê±´ê´€ë¦¬ì‚¬', serviceCareer: 'êµ°ì˜ê²½', counselingStart: '2020-11-01', education: 'ê¸°ë³¸', phone: '010-4321-8765', email: 'lee.js@example.com' },
                { id: 'user_28', name: 'ë°•ë³´ê²€', org: 'ë…¸ì›êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', dormant: false, business: 'ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤', ipin: '9023-4567', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì‹ ê·œ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1993-01-20', position: 'ìƒë‹´ì‚¬', degree: 'ëŒ€ì¡¸', major: 'êµìœ¡í•™', license: 'êµì‚¬ ìê²©ì¦', serviceCareer: 'ì°¾ê¸ˆ', counselingStart: '2024-03-01', education: 'ê¸°ë³¸', phone: '010-5555-4444', email: 'park.bg@example.com' },
                { id: 'user_29', name: 'ìœ¤ì•„', org: 'ë™ì‘êµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', dormant: false, business: 'ë‹¨ê¸°ê¸ˆì—°ìº í”„', ipin: '9024-5678', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ê²½ë ¥', career: '30', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1990-05-30', position: 'íŒ€ì›', degree: 'ëŒ€ì¡¸', major: 'ê°„í˜¸í•™', license: 'ê°„í˜¸ì‚¬ ë©´í—ˆ', serviceCareer: 'ê¸ˆì—°ìº í”„', counselingStart: '2021-02-15', education: 'ì‹¬í™”', phone: '010-3210-9876', email: 'yoona@example.com' },
                { id: 'user_30', name: 'ê¹€ìš°ë¹ˆ', org: 'ì„œì´ˆêµ¬ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', dormant: false, business: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipin: '9025-6789', employment: 'ì„ íƒ', job: 'ì„ íƒ', gender: 'ì„ íƒ', careerType: 'ì‹ ê·œ', career: '0', continuous: 'ì„ íƒ', terms: 'ë¯¸ë™ì˜', status: 'ì„ íƒ', reason: '', start: '', end: '', dob: '1989-07-16', position: 'ìƒë‹´ì‚¬', degree: 'ëŒ€ì¡¸', major: 'ì˜í•™', license: 'ì˜ì‚¬ë©´í—ˆ', serviceCareer: 'ë³´ê±´ì†Œ', counselingStart: '2024-05-10', education: 'ê¸°ë³¸', phone: '010-1111-0000', email: 'kim.wb@example.com' }
            ];

            // íŒì—… ë¡œì§
            if (localStorage.getItem(storageKey) !== 'false') {
                modal.style.display = 'flex';
            } else {
                modal.style.display = 'none';
            }

            closeModalBtn.addEventListener('click', () => {
                modal.style.display = 'none';
                if (doNotShowAgainCheckbox.checked) {
                    localStorage.setItem(storageKey, 'false');
                }
            });

            // ê¸°ëŠ¥ êµ¬í˜„ í•¨ìˆ˜
            function renderUserList(users) {
                // ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™” (í—¤ë” ì œì™¸)
                const existingRows = userListGrid.querySelectorAll('.user-row');
                existingRows.forEach(row => row.remove());

                users.forEach(user => {
                    const row = document.createElement('div');
                    row.className = 'user-row grid grid-cols-4 text-xs p-2 border-b border-gray-100';
                    row.dataset.userId = user.id;

                    row.innerHTML = `
                        <div>${user.id}</div>
                        <div>${user.name}</div>
                        <div>${user.org}</div>
                        <div>${user.group}</div>
                    `;
                    userListGrid.appendChild(row);

                    // ë¦¬ìŠ¤íŠ¸ í•­ëª© í´ë¦­ ì‹œ ìƒì„¸ ì •ë³´ í‘œì‹œ
                    row.addEventListener('click', () => {
                        // ëª¨ë“  í–‰ì˜ ì„ íƒ íš¨ê³¼ë¥¼ ì œê±°
                        document.querySelectorAll('.user-row').forEach(r => r.classList.remove('selected'));
                        // í´ë¦­í•œ í–‰ì— ì„ íƒ íš¨ê³¼ ì¶”ê°€
                        row.classList.add('selected');
                        displayUserDetails(user);
                    });
                });
            }

            function displayUserDetails(user) {
                // ì‚¬ìš©ì ìƒì„¸ ì •ë³´ í•„ë“œì— ë°ì´í„° ì±„ìš°ê¸°
                detailUserIdInput.value = user.id;
                detailUserNameInput.value = user.name;
                accountTypeSelect.value = user.accountType || 'ì„ íƒ';
                businessDivisionSelect.value = user.business || 'ì„ íƒ';
                ipinIdInput.value = user.ipin || '';
                orgNameInput.value = user.org || '';
                employmentTypeSelect.value = user.employment || 'ì„ íƒ';
                userGroupSelect.value = user.group || 'ì„ íƒ';
                jobTitleSelect.value = user.job || 'ì„ íƒ';
                genderSelect.value = user.gender || 'ì„ íƒ';
                careerTypeSelect.value = user.careerType || 'ì„ íƒ';
                careerInput.value = user.career || '';
                continuousEmploymentSelect.value = user.continuous || 'ì„ íƒ';
                termsAgreementSelect.value = 'ë¯¸ë™ì˜'; // ê¸°ë³¸ê°’ ì„¤ì •
                usageStatusSelect.value = user.status || 'ì„ íƒ';
                reasonInput.value = user.reason || '';
                startDateInput.value = user.start || '';
                endDateInput.value = user.end || '';
                
                // 'ì‚¬ìš©ì(ê¸ˆì—°ìƒë‹´ì‚¬) ì¶”ê°€ì •ë³´' ì˜ì—­ í‘œì‹œ/ìˆ¨ê¸°ê¸°
                if (user.group === 'ê¸ˆì—°ìƒë‹´ì‚¬' || user.group === 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›') {
                    additionalInfoSection.classList.remove('hidden-section');
                    // ì¶”ê°€ ì •ë³´ í•„ë“œì— ë°ì´í„° ì±„ìš°ê¸°
                    dobInput.value = user.dob || '';
                    positionInput.value = user.position || '';
                    finalDegreeSelect.value = user.degree || 'ì„ íƒ';
                    majorFieldSelect.value = user.major || 'ì„ íƒ';
                    counselingLicenseInput.value = user.license || '';
                    serviceCareerSelect.value = user.serviceCareer || 'ì„ íƒ';
                    counselingStartDateInput.value = user.counselingStart || '';
                    educationSelect.value = user.education || 'ì„ íƒ';
                    phoneInput.value = user.phone || '';
                    emailInput.value = user.email || '';
                    
                    // êµìœ¡ ì´ìˆ˜ ì—¬ë¶€ê°€ 'ê¸°íƒ€'ì¸ ê²½ìš° íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ í‘œì‹œ
                    if (user.education === 'ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)') {
                        fileUploadContainer.classList.remove('hidden-section');
                    } else {
                        fileUploadContainer.classList.add('hidden-section');
                    }
                } else {
                    additionalInfoSection.classList.add('hidden-section');
                }
            }

            function clearUserDetails() {
                // ëª¨ë“  ìƒì„¸ ì •ë³´ í•„ë“œë¥¼ ì´ˆê¸° ê°’ìœ¼ë¡œ ì´ˆê¸°í™”
                detailUserIdInput.value = '';
                detailUserNameInput.value = '';
                accountTypeSelect.value = 'ì„ íƒ';
                businessDivisionSelect.value = 'ì„ íƒ';
                ipinIdInput.value = '';
                orgNameInput.value = '';
                employmentTypeSelect.value = 'ì„ íƒ';
                userGroupSelect.value = 'ì„ íƒ';
                jobTitleSelect.value = 'ì„ íƒ';
                genderSelect.value = 'ì„ íƒ';
                careerTypeSelect.value = 'ì„ íƒ';
                careerInput.value = '';
                continuousEmploymentSelect.value = 'ì„ íƒ';
                termsAgreementSelect.value = 'ë¯¸ë™ì˜'; // ê¸°ë³¸ê°’ ì„¤ì •
                usageStatusSelect.value = 'ì„ íƒ';
                reasonInput.value = '';
                startDateInput.value = '';
                endDateInput.value = '';

                // ì¶”ê°€ ì •ë³´ í•„ë“œ ì´ˆê¸°í™”
                dobInput.value = '';
                positionInput.value = '';
                finalDegreeSelect.value = 'ì„ íƒ';
                majorFieldSelect.value = 'ì„ íƒ';
                counselingLicenseInput.value = '';
                serviceCareerSelect.value = 'ì„ íƒ';
                counselingStartDateInput.value = '';
                educationSelect.value = 'ì„ íƒ';
                phoneInput.value = '';
                emailInput.value = '';
                
                // ì¶”ê°€ ì •ë³´ ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                additionalInfoSection.classList.add('hidden-section');
                fileUploadContainer.classList.add('hidden-section');

                // ë¦¬ìŠ¤íŠ¸ì˜ ì„ íƒ íš¨ê³¼ ì œê±°
                document.querySelectorAll('.user-row').forEach(row => row.classList.remove('selected'));
            }

            // 'ì¡°íšŒ' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            searchBtn.addEventListener('click', () => {
                const userName = userNameInput.value.trim().toLowerCase();
                const userGroup = userGroupFilterSelect.value;
                let filteredUsers = testUsers;

                // ì‚¬ìš©ìëª… í•„í„°ë§
                if (userName !== '') {
                    filteredUsers = filteredUsers.filter(user => user.name.toLowerCase().includes(userName));
                }

                // ì‚¬ìš©ì ê·¸ë£¹ í•„í„°ë§
                if (userGroup !== 'ì „ì²´') {
                    filteredUsers = filteredUsers.filter(user => user.group === userGroup);
                }

                renderUserList(filteredUsers);
                // í•„í„°ë§ í›„ ì²« ë²ˆì§¸ ì‚¬ìš©ì ì„ íƒ (ì„ íƒ ì‚¬í•­)
                if (filteredUsers.length > 0) {
                    displayUserDetails(filteredUsers[0]);
                    userListGrid.querySelector('.user-row').classList.add('selected');
                } else {
                    // ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆì„ ê²½ìš° ìƒì„¸ ì •ë³´ ì´ˆê¸°í™”
                    clearUserDetails();
                }
            });
            
            // 'ì‹ ê·œ' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            newBtn.addEventListener('click', () => {
                clearUserDetails();
            });

            // ì‚¬ìš©ìê·¸ë£¹ ìƒì„¸ ì •ë³´ ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ ì´ë²¤íŠ¸ (ì¶”ê°€ ì •ë³´ ì˜ì—­ í‘œì‹œ/ìˆ¨ê¸°ê¸°)
            userGroupSelect.addEventListener('change', (e) => {
                const selectedValue = e.target.value;
                if (selectedValue === 'ê¸ˆì—°ìƒë‹´ì‚¬' || selectedValue === 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›') {
                    additionalInfoSection.classList.remove('hidden-section');
                } else {
                    additionalInfoSection.classList.add('hidden-section');
                }
            });

            // êµìœ¡ ì´ìˆ˜ ì—¬ë¶€ ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ ì´ë²¤íŠ¸ (íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ í‘œì‹œ/ìˆ¨ê¸°ê¸°)
            educationSelect.addEventListener('change', (e) => {
                if (e.target.value === 'ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)') {
                    fileUploadContainer.classList.remove('hidden-section');
                } else {
                    fileUploadContainer.classList.add('hidden-section');
                }
            });
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë°ì´í„° ë Œë”ë§
            renderUserList(testUsers);
            if (testUsers.length > 0) {
                displayUserDetails(testUsers[0]);
                userListGrid.querySelector('.user-row').classList.add('selected');
            }
            
            // Firebase Firestoreì™€ ì—°ë™í•˜ì—¬ ê²€í†  ì˜ê²¬ì„ ê´€ë¦¬í•˜ëŠ” í•¨ìˆ˜
            function initCommentsFeature() {
                if (!db || !auth) {
                    console.error("Firestoreê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Firebase ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”.");
                    // ì‚¬ìš©ìì—ê²Œ Firebase ì„¤ì • ì˜¤ë¥˜ë¥¼ ì•Œë¦¬ëŠ” ëª¨ë‹¬ ë˜ëŠ” ë©”ì‹œì§€ í‘œì‹œ
                    return;
                }

                // ëŒ“ê¸€ ì»¬ë ‰ì…˜ ê²½ë¡œ: artifacts/{appId}/public/data/comments
                // ì—¬ê¸°ì„œ appIdëŠ” firebaseConfig.projectIdë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
                const commentsCollectionRef = collection(db, `artifacts/${appId}/public/data/comments`);

                // 'ì¶”ê°€' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                addCommentBtn.addEventListener('click', async () => {
                    const commentText = commentInput.value.trim();
                    if (commentText) {
                        try {
                            // Firestoreì— ìƒˆ ë¬¸ì„œ ì¶”ê°€
                            await addDoc(commentsCollectionRef, {
                                text: commentText,
                                timestamp: Date.now()
                            });
                            commentInput.value = ''; // ì…ë ¥ì°½ ì´ˆê¸°í™”
                        } catch (e) {
                            console.error("ë¬¸ì„œ ì¶”ê°€ ì˜¤ë¥˜: ", e);
                            // ì‚¬ìš©ìì—ê²Œ ì¶”ê°€ ì‹¤íŒ¨ ë©”ì‹œì§€ í‘œì‹œ
                        }
                    }
                });

                // ì‹¤ì‹œê°„ìœ¼ë¡œ Firestore ë°ì´í„° ë³€í™”ë¥¼ ê°ì§€í•˜ê³  í™”ë©´ì„ ì—…ë°ì´íŠ¸
                onSnapshot(commentsCollectionRef, (snapshot) => {
                    commentList.innerHTML = ''; // ëŒ“ê¸€ ëª©ë¡ ì´ˆê¸°í™”
                    const comments = [];
                    snapshot.forEach((doc) => {
                        // ë¬¸ì„œ IDì™€ ë°ì´í„°ë¥¼ í•¨ê»˜ ì €ì¥
                        comments.push({ id: doc.id, ...doc.data() });
                    });
                    
                    // ìµœì‹  ëŒ“ê¸€ì´ ìœ„ì— ì˜¤ë„ë¡ ì •ë ¬
                    comments.sort((a, b) => b.timestamp - a.timestamp);
                    
                    // ì •ë ¬ëœ ëŒ“ê¸€ì„ í™”ë©´ì— ë Œë”ë§
                    comments.forEach(comment => {
                        const commentElement = createCommentElement(comment);
                        commentList.appendChild(commentElement);
                    });
                }, (error) => {
                    console.error("Firestore ìŠ¤ëƒ…ìƒ· ì˜¤ë¥˜: ", error);
                    // ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜ë¥¼ ì•Œë¦¬ëŠ” ë©”ì‹œì§€ í‘œì‹œ
                });

                // ëŒ“ê¸€ HTML ìš”ì†Œ ìƒì„±
                function createCommentElement(comment) {
                    const commentDiv = document.createElement('div');
                    commentDiv.className = 'comment-item text-sm text-gray-700';
                    commentDiv.innerHTML = `
                        <span>${comment.text}</span>
                        <button class="delete-btn" data-id="${comment.id}">ì‚­ì œ</button>
                    `;
                    return commentDiv;
                }

                // 'ì‚­ì œ' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (ì´ë²¤íŠ¸ ìœ„ì„)
                // ì‚­ì œ í™•ì¸ ëª¨ë‹¬ì„ ë„ìš°ë„ë¡ ìˆ˜ì •
                commentList.addEventListener('click', async (e) => {
                    if (e.target.classList.contains('delete-btn')) {
                        commentToDeleteId = e.target.dataset.id; // ì‚­ì œí•  ëŒ“ê¸€ ID ì €ì¥
                        deleteConfirmationModal.classList.remove('hidden'); // ëª¨ë‹¬ í‘œì‹œ
                    }
                });

                // 'ì˜ˆ' ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤ì œ ì‚­ì œ ì§„í–‰
                confirmDeleteYesBtn.addEventListener('click', async () => {
                    if (commentToDeleteId) {
                        try {
                            const commentDocRef = doc(db, `artifacts/${appId}/public/data/comments`, commentToDeleteId);
                            await deleteDoc(commentDocRef);
                            commentToDeleteId = null; // ID ì´ˆê¸°í™”
                            deleteConfirmationModal.classList.add('hidden'); // ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
                        } catch (e) {
                            console.error("ë¬¸ì„œ ì‚­ì œ ì˜¤ë¥˜: ", e);
                            // ì‚¬ìš©ìì—ê²Œ ì‚­ì œ ì‹¤íŒ¨ ë©”ì‹œì§€ í‘œì‹œ
                        }
                    }
                });

                // 'ì•„ë‹ˆì˜¤' ë²„íŠ¼ í´ë¦­ ì‹œ ì‚­ì œ ì·¨ì†Œ ë° ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
                confirmDeleteNoBtn.addEventListener('click', () => {
                    commentToDeleteId = null; // ID ì´ˆê¸°í™”
                    deleteConfirmationModal.classList.add('hidden'); // ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
                });
            }

            // --- CSV ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì¶”ê°€ ---
            excelBtn.addEventListener('click', () => {
                exportUsersToCsv(testUsers);
            });

            function exportUsersToCsv(users) {
                // CSV í—¤ë” ì •ì˜ (ëª¨ë“  ê°€ëŠ¥í•œ í•„ë“œ í¬í•¨)
                const headers = [
                    'ì‚¬ìš©ìID', 'ì´ë¦„', 'ì¡°ì§ëª…', 'ì‚¬ìš©ìê·¸ë£¹', 'ê³„ì •ìœ í˜•', 'íœ´ë©´ê³„ì •', 
                    'ì—…ë¬´êµ¬ë¶„', 'I-PIN ID', 'ê³ ìš©í˜•íƒœ', 'ì§ê¸‰', 'ì„±ë³„', 'ì‹ ê·œ/ê²½ë ¥', 
                    'ê²½ë ¥(ê°œì›”)', 'ì§€ì†ê³ ìš©', 'ì•½ê´€ë™ì˜', 'ì‚¬ìš©ìœ ë¬´', 'ì‚¬ìœ ', 'ì‚¬ìš©ì‹œì‘ì¼', 
                    'ì‚¬ìš©ì¢…ë£Œì¼', 'ìƒë…„ì›”ì¼', 'ì§ìœ„/ì§ê¸‰', 'ìµœì¢…í•™ìœ„', 'ì „ê³µë¶„ì•¼', 
                    'ìƒë‹´ ê´€ë ¨ ìê²©ì¦ ë³´ìœ  ì—¬ë¶€', 'ì„œë¹„ìŠ¤ ìƒë‹´ ê²½ë ¥', 'ìƒë‹´ì—…ë¬´ ì‹œì‘ì¼', 
                    'êµìœ¡ ì´ìˆ˜ ì—¬ë¶€', 'ì „í™”ë²ˆí˜¸', 'ì´ë©”ì¼'
                ];
                
                // CSV ë¬¸ìì—´ ìƒì„±
                let csvContent = headers.map(header => `"${header}"`).join(',') + '\n'; // í—¤ë” í–‰
                
                users.forEach(user => {
                    const row = [
                        user.id || '',
                        user.name || '',
                        user.org || '',
                        user.group || '',
                        user.accountType || '',
                        user.dormant ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤',
                        user.business || '',
                        user.ipin || '',
                        user.employment || '',
                        user.job || '',
                        user.gender || '',
                        user.careerType || '',
                        user.career || '0',
                        user.continuous || '',
                        user.terms || '',
                        user.status || '',
                        user.reason || '',
                        user.start || '',
                        user.end || '',
                        // ì¶”ê°€ ì •ë³´ í•„ë“œ (ê¸ˆì—°ìƒë‹´ì‚¬ ê·¸ë£¹ì—ë§Œ í•´ë‹¹í•  ìˆ˜ ìˆì§€ë§Œ, ëª¨ë“  í•„ë“œì— ëŒ€í•´ í¬í•¨)
                        user.dob || '',
                        user.position || '',
                        user.degree || '',
                        user.major || '',
                        user.license || '',
                        user.serviceCareer || '',
                        user.counselingStart || '',
                        user.education || '',
                        user.phone || '',
                        user.email || ''
                    ].map(field => `"${String(field).replace(/"/g, '""')}"`).join(','); // ê° í•„ë“œë¥¼ ë”°ì˜´í‘œë¡œ ë¬¶ê³  ë‚´ë¶€ ë”°ì˜´í‘œ ì´ìŠ¤ì¼€ì´í”„
                    csvContent += row + '\n';
                });

                // Blob ìƒì„± ë° ë‹¤ìš´ë¡œë“œ
                const blob = new Blob(["\ufeff", csvContent], { type: 'text/csv;charset=utf-8;' }); // UTF-8 BOM ì¶”ê°€
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'ì‚¬ìš©ì_ì •ë³´.csv';
                document.body.appendChild(link); // Firefoxì—ì„œ í•„ìš”
                link.click();
                document.body.removeChild(link); // ë§í¬ ì œê±°
            }
            // --- CSV ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ë ---
        });
    </script>
</body>
</html>
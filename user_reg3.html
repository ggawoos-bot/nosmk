<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>금연상담사 추가정보</title>
  <style>
    /* General styles */
    body {
      font-family: 'Malgun Gothic', '맑은 고딕', dotum, '돋움', sans-serif;
      background-color: #f0f0f0;
      color: #333;
      margin: 0;
      padding: 20px;
    }

    #root {
      width: 100%;
      max-width: 900px;
      margin: auto;
    }

    /* Main container */
    .container {
      background-color: #fff;
      border: 1px solid #ccc;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: 1.2em;
      margin-bottom: 20px;
      text-align: left;
      font-weight: bold;
    }

    /* Form container */
    .form-container {
      border: 1px solid #c0c0c0;
      background-color: #f7f7f7;
      padding: 15px;
    }

    .form-header {
      font-weight: bold;
      font-size: 1.0em;
      margin-bottom: 15px;
      padding-left: 10px;
      position: relative;
    }

    .form-header::before {
      content: '';
      position: absolute;
      left: 0;
      top: 2px;
      width: 4px;
      height: 14px;
      background-color: #e54b4b;
    }

    .form-grid {
      display: grid;
      grid-template-columns: auto 1fr auto 1fr;
      gap: 8px;
      border-top: 2px solid #a0a0a0;
      padding-top: 10px;
      align-items: center;
    }

    .grid-item-label {
      font-size: 0.9em;
      font-weight: bold;
      text-align: center;
      background-color: #f3f3f3;
      padding: 6px 10px;
      border: 1px solid #ddd;
      white-space: nowrap;
    }

    .grid-item-label:empty {
        background-color: transparent;
        border: none;
    }

    .grid-item-field {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .grid-item-field:empty {
        min-height: 28px; /* Match input height */
    }

    .grid-span-3 {
      grid-column: 2 / 5;
    }

    input[type="text"],
    input[type="date"],
    select {
      padding: 5px;
      border: 1px solid #999;
      border-radius: 2px;
      font-size: 0.9em;
      width: 100%;
      box-sizing: border-box;
    }
    
    input[type="checkbox"] {
        width: auto;
    }

    .phone-input {
      width: 60px;
      text-align: center;
    }

    .email-input {
      flex-grow: 1;
      width: 100px;
    }

    .upload-button {
      padding: 5px 10px;
      background-color: #e0e0e0;
      border: 1px solid #999;
      border-radius: 2px;
      cursor: pointer;
      font-size: 0.9em;
      white-space: nowrap;
    }
    
    .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 5px 15px;
        align-items: center;
    }

    .checkbox-group label {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        font-size: 0.9em;
        white-space: nowrap;
    }

    /* File table */
    .file-table-container {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #ccc;
    }

    .file-table {
      width: 100%;
      border-collapse: collapse;
    }

    .file-table th,
    .file-table td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
      font-size: 0.9em;
    }
    
    .file-table th:first-child,
    .file-table td:first-child {
        width: 40px;
    }

    .file-table th {
      background-color: #e8e8e8;
    }
    
    #major-other-row {
      display: contents;
    }

    /* Delete button */
    .delete-button-container {
      margin-top: 10px;
      text-align: right;
    }

    .delete-button {
      padding: 5px 15px;
      background-color: #e0e0e0;
      border: 1px solid #999;
      border-radius: 2px;
      cursor: pointer;
      font-size: 0.9em;
    }
    .required {
      color: red;
      margin-left: 3px;
    }
  </style>
</head>
<body>
  <div id="root">
    <div class="container">
      <h1>금연상담사 추가정보 메인화면</h1>
      <div class="form-container">
        <div class="form-header">금연상담사 추가정보</div>
        <div class="form-grid">
          <!-- Row 1 -->
          <label class="grid-item-label">생년월일<span class="required">*</span></label>
          <div class="grid-item-field">
            <input type="date" value="2025-10-09" />
          </div>
          <div class="grid-item-label"></div> <!-- Empty label for removed field -->
          <div class="grid-item-field"></div> <!-- Empty field -->

          <!-- Row 2 -->
          <label class="grid-item-label">최종학위<span class="required">*</span></label>
          <div class="grid-item-field">
            <select>
              <option>선택</option>
              <option selected>고등학교 졸업</option>
              <option>대학교 재학</option>
              <option>대학교 졸업</option>
              <option>대학원(석사) 재학</option>
              <option>대학원(석사) 졸업</option>
              <option>대학원(박사) 재학</option>
              <option>대학원(박사) 졸업</option>
            </select>
          </div>
          <label class="grid-item-label">전공분야<span class="required">*</span></label>
          <div class="grid-item-field">
            <select id="major-select">
              <option>선택</option>
              <option>의학</option>
              <option selected>간호학</option>
              <option>보건학</option>
              <option>상담학</option>
              <option>심리학</option>
              <option>사회복지학</option>
              <option>교육학</option>
              <option>아동학</option>
              <option>청소년학</option>
              <option value="기타">기타</option>
            </select>
          </div>
          
          <!-- Conditional Row for Other Major -->
          <tr id="major-other-row" style="display: none;">
            <label class="grid-item-label">전공분야(기타)<span class="required">*</span></label>
            <td class="grid-item-field grid-span-3">
              <input type="text" id="major-other-input" placeholder="전공분야 입력" />
            </td>
          </tr>

          <!-- Row 3 -->
          <label class="grid-item-label">보유 중인 상담 관련 자격</label>
          <div class="grid-item-field grid-span-3">
            <input type="text" value="기초심리학" />
          </div>

          <!-- Row 4 -->
          <label class="grid-item-label">타 금연지원서비스 상담 경력<span class="required">*</span></label>
          <div class="grid-item-field grid-span-3 checkbox-group" id="experience-group">
            <label><input type="checkbox" name="experience" id="exp-none"> 해당없음</label>
            <label><input type="checkbox" name="experience"> 금연상담전화</label>
            <label><input type="checkbox" name="experience"> 보건소 금연클리닉</label>
            <label><input type="checkbox" name="experience"> 건강보험공단 병의원 금연치료</label>
            <label><input type="checkbox" name="experience"> 금연캠프</label>
            <label title="기존 찾아가는 금연지원서비스"><input type="checkbox" name="experience"> 생활터 금연환경조성</label>
            <label><input type="checkbox" name="experience"> 군의경 금연사업</label>
          </div>

          <!-- Row 5 -->
          <label class="grid-item-label">현 금연상담업무 시작일<span class="required">*</span></label>
          <div class="grid-item-field">
            <input type="date" value="2025-10-14" />
          </div>
          <div class="grid-item-label"></div>
          <div class="grid-item-field"></div>
          
          <!-- Row 6 -->
          <label class="grid-item-label">전화번호<span class="required">*</span></label>
          <div class="grid-item-field">
              <input type="text" class="phone-input" maxlength="3" /> -
              <input type="text" class="phone-input" maxlength="4" /> -
              <input type="text" class="phone-input" maxlength="4" />
          </div>
          <label class="grid-item-label">이메일<span class="required">*</span></label>
          <div class="grid-item-field">
              <input type="text" class="email-input" /> @
              <input type="text" class="email-input" placeholder="직접입력" />
          </div>
          
          <!-- Row 7 -->
          <label class="grid-item-label">교육 이수 여부<br>(한국건강증진개발원 표준교육프로그램)<span class="required">*</span></label>
          <div class="grid-item-field grid-span-3 checkbox-group" id="education-group">
            <label><input type="checkbox" name="education"> 기초과정</label>
            <label><input type="checkbox" name="education"> 기본과정</label>
            <label><input type="checkbox" name="education"> 심화과정</label>
            <label><input type="checkbox" name="education"> 기타</label>
            <label><input type="checkbox" name="education" id="edu-none"> 해당없음</label>
            <button class="upload-button" id="upload-cert-btn">이수증 업로드</button>
          </div>
        </div>
        <div class="file-table-container">
            <table class="file-table">
                <thead>
                    <tr>
                        <th><input type="checkbox" id="select-all-files" title="Select All"></th>
                        <th>파일명</th>
                        <th>크기(KB)</th>
                        <th>확장자</th>
                    </tr>
                </thead>
                <tbody id="file-list-body">
                    <tr>
                        <td><input type="checkbox" name="file-select"></td>
                        <td>이수증 테스트.pdf</td>
                        <td>75,934</td>
                        <td>pdf</td>
                    </tr>
                </tbody>
            </table>
            <div class="delete-button-container">
                <button class="delete-button" id="delete-selected-files-btn">삭제</button>
            </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Logic for Major field "Other" input
      const majorSelect = document.getElementById('major-select');
      const majorOtherRow = document.getElementById('major-other-row');
      const majorOtherInput = document.getElementById('major-other-input');

      majorSelect.addEventListener('change', () => {
          if (majorSelect.value === '기타') {
              majorOtherRow.style.display = 'contents';
          } else {
              majorOtherRow.style.display = 'none';
              majorOtherInput.value = ''; // Clear value when hidden
          }
      });

      // Logic for "Other Smoking Cessation Service Counseling Experience"
      const expNoneCheckbox = document.getElementById('exp-none');
      const experienceGroup = document.getElementById('experience-group');
      const otherExpCheckboxes = experienceGroup.querySelectorAll('input[type="checkbox"]:not(#exp-none)');
  
      experienceGroup.addEventListener('change', (event) => {
          const target = event.target;
          if (target.type !== 'checkbox') return;
  
          // If "Not Applicable" is checked
          if (target.id === 'exp-none' && target.checked) {
              otherExpCheckboxes.forEach(cb => {
                  cb.checked = false;
                  cb.disabled = true;
              });
          } 
          // If "Not Applicable" is unchecked
          else if (target.id === 'exp-none' && !target.checked) {
              otherExpCheckboxes.forEach(cb => {
                  cb.disabled = false;
              });
          }
          // If any other checkbox is checked, uncheck "Not Applicable"
          else if (target.id !== 'exp-none') {
              const anyOtherChecked = Array.from(otherExpCheckboxes).some(cb => cb.checked);
              if (anyOtherChecked) {
                expNoneCheckbox.checked = false;
              }
          }
      });

      // Logic for "Education Completion Status"
      const eduNoneCheckbox = document.getElementById('edu-none');
      const educationGroup = document.getElementById('education-group');
      const otherEduCheckboxes = educationGroup.querySelectorAll('input[type="checkbox"]:not(#edu-none)');
      const uploadBtn = document.getElementById('upload-cert-btn');

      educationGroup.addEventListener('change', (event) => {
          const target = event.target;
          if (target.type !== 'checkbox') return;

          // If "Not Applicable" is checked
          if (target.id === 'edu-none' && target.checked) {
              otherEduCheckboxes.forEach(cb => {
                  cb.checked = false;
                  cb.disabled = true;
              });
              uploadBtn.disabled = true;
          } 
          // If "Not Applicable" is unchecked
          else if (target.id === 'edu-none' && !target.checked) {
              otherEduCheckboxes.forEach(cb => {
                  cb.disabled = false;
              });
              uploadBtn.disabled = false;
          }
          // If any other checkbox is checked, uncheck "Not Applicable"
          else if (target.id !== 'edu-none') {
              const anyOtherChecked = Array.from(otherEduCheckboxes).some(cb => cb.checked);
              if (anyOtherChecked) {
                eduNoneCheckbox.checked = false;
              }
          }
      });

      // --- FILE UPLOAD AND DELETE LOGIC ---
      const fileUploadInput = document.createElement('input');
      fileUploadInput.type = 'file';
      fileUploadInput.multiple = true;
      fileUploadInput.hidden = true;
      fileUploadInput.accept = ".pdf,.jpg,.jpeg,.png,.hwp,.doc,.docx";
      document.body.appendChild(fileUploadInput);

      const fileListBody = document.getElementById('file-list-body');
      const deleteSelectedBtn = document.getElementById('delete-selected-files-btn');
      const selectAllCheckbox = document.getElementById('select-all-files');

      // Trigger hidden file input when "Upload" button is clicked
      uploadBtn.addEventListener('click', (e) => {
          e.preventDefault(); // Prevent form submission if it's part of a form
          fileUploadInput.click();
      });

      // Handle file selection
      fileUploadInput.addEventListener('change', (event) => {
          const files = event.target.files;
          if (files.length === 0) return;

          for (const file of files) {
              const row = document.createElement('tr');

              const checkboxCell = document.createElement('td');
              const checkbox = document.createElement('input');
              checkbox.type = 'checkbox';
              checkbox.name = 'file-select';
              checkboxCell.appendChild(checkbox);

              const nameCell = document.createElement('td');
              nameCell.textContent = file.name;

              const sizeCell = document.createElement('td');
              sizeCell.textContent = (file.size / 1024).toLocaleString(undefined, { maximumFractionDigits: 0 });

              const extCell = document.createElement('td');
              const nameParts = file.name.split('.');
              extCell.textContent = nameParts.length > 1 ? nameParts.pop().toLowerCase() : '';

              row.appendChild(checkboxCell);
              row.appendChild(nameCell);
              row.appendChild(sizeCell);
              row.appendChild(extCell);

              fileListBody.appendChild(row);
          }
          event.target.value = ''; // Reset for re-uploading same file
      });

      // Handle delete button click
      deleteSelectedBtn.addEventListener('click', () => {
          const selectedCheckboxes = fileListBody.querySelectorAll('input[name="file-select"]:checked');
          selectedCheckboxes.forEach(cb => {
              cb.closest('tr').remove();
          });
          if (selectedCheckboxes.length > 0) {
            selectAllCheckbox.checked = false;
          }
      });

      // Handle "Select All" checkbox
      selectAllCheckbox.addEventListener('change', (event) => {
          const allCheckboxes = fileListBody.querySelectorAll('input[name="file-select"]');
          allCheckboxes.forEach(cb => {
              cb.checked = event.target.checked;
          });
      });
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ìš©ì ë“±ë¡/ê´€ë¦¬</title>
    <!-- Tailwind CSS CDNì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤íƒ€ì¼ë§ì„ ì ìš©í•©ë‹ˆë‹¤. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header-bar {
            background-color: #e5e7eb;
            padding: 0.5rem 1rem;
            border-bottom: 1px solid #d1d5db;
        }
        .header-bar span {
            font-weight: 500;
        }
        .btn {
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .btn-blue {
            background-color: #3b82f6;
            color: white;
        }
        .btn-blue:hover {
            background-color: #2563eb;
        }
        .btn-gray {
            background-color: #e5e7eb;
            color: #4b5563;
        }
        .btn-gray:hover {
            background-color: #d1d5db;
        }
        .form-input {
            width: 100%;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db;
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }
        .grid-header {
            background-color: #dbeafe;
            color: #1e40af;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
        }
        .form-section {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 1rem;
            background-color: white;
        }
        /* ë¼ë²¨ í…ìŠ¤íŠ¸ í¬ê¸° ì¡°ì •ì„ ìœ„í•œ ìƒˆë¡œìš´ í´ë˜ìŠ¤ */
        .form-label {
            font-size: 0.75rem;
        }
        /* ë‚ ì§œ ì…ë ¥ ì•„ì´ì½˜ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ */
        .date-input-container {
            position: relative;
            width: 100%;
        }
        .date-input-container input[type="date"] {
            padding-right: 2rem;
        }
        .date-input-container::after {
            content: "ğŸ“…";
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #4b5563;
        }
        /* ì‚¬ìš©ìê·¸ë£¹ ë¼ë²¨ì„ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” í´ë˜ìŠ¤ */
        .user-group-label {
            color: #ef4444;
        }
        /* ì¶”ê°€ì •ë³´ ì„¹ì…˜ì„ ìˆ¨ê¸°ê¸° ìœ„í•œ í´ë˜ìŠ¤ */
        .hidden-section {
            display: none;
        }
        /* ê·¸ë¦¬ë“œ í…Œì´ë¸” í–‰ ìŠ¤íƒ€ì¼ */
        .user-row {
            cursor: pointer;
        }
        .user-row:hover {
            background-color: #f3f4f6;
        }
        .user-row.selected {
            background-color: #dbeafe;
            color: #1e40af;
            font-weight: 600;
        }

        /* íŒì—… ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            width: 90%;
            max-width: 400px;
            text-align: center;
        }
    </style>
</head>
<body class="bg-gray-100 p-4">

    <!-- ì´ˆê¸° ë©”ì‹œì§€ íŒì—… ëª¨ë‹¬ -->
    <div id="initialMessageModal" class="modal-overlay">
        <div class="modal-content">
            <h2 class="text-xl font-bold mb-4">ì‚¬ì´íŠ¸ ì•ˆë‚´</h2>
            <p class="text-gray-700 mb-4">
                ë³¸ ì‚¬ì´íŠ¸ëŠ” í™”ë©´ êµ¬ì„±ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•œ ê°€ìƒ ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.<br>
                ì‚¬ìš©ìê·¸ë£¹(ë¶‰ì€ìƒ‰)ì„ ë³€ê²½í•˜ë©´ ì‚¬ìš©ì ì¶”ê°€ì •ë³´ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
            <div class="flex items-center justify-center mb-4 text-sm">
                <input type="checkbox" id="doNotShowAgain" class="mr-2">
                <label for="doNotShowAgain">ì•ìœ¼ë¡œ ë³´ì´ì§€ ì•Šê¸°</label>
            </div>
            <button id="closeModalBtn" class="btn btn-blue w-full">ë‹«ê¸°</button>
        </div>
    </div>

    <!-- Header Section -->
    <div class="header-bar flex items-center justify-between rounded-t-lg">
        <div class="flex items-center space-x-2 text-sm">
            <span>ì‚¬ì—…ì ë“±ë¡ > ì‚¬ìš©ì ë“±ë¡/ê´€ë¦¬</span>
        </div>
        <div class="flex items-center space-x-2">
            <button class="btn btn-blue" id="newBtn">ì‹ ê·œ</button>
            <button class="btn btn-blue" id="searchBtn">ì¡°íšŒ</button>
            <button class="btn btn-blue" id="saveBtn">ì €ì¥</button>
            <button class="btn btn-blue" id="excelBtn">ì—‘ì…€</button>
        </div>
    </div>

    <!-- Main Content Container -->
    <div class="container p-4 bg-white rounded-b-lg shadow-lg">
        <!-- Top Filters Section -->
        <div class="flex items-center space-x-4 mb-4 text-sm">
            <div class="flex items-center space-x-2">
                <span class="form-label">ê¸°ê´€ìœ í˜•</span>
                <select class="form-input w-28" id="agencyTypeSelect">
                    <option>ë³´ê±´ì†Œ</option>
                </select>
            </div>
            <div class="flex items-center space-x-2">
                <span class="form-label">ì§€ì—­</span>
                <select class="form-input w-28" id="regionSelect">
                    <option>ì„œìš¸íŠ¹</option>
                </select>
            </div>
            <div class="flex items-center space-x-2">
                <span class="form-label">ê¸°ê´€</span>
                <select class="form-input w-28" id="agencySelect">
                    <option>ì „ì²´</option>
                </select>
            </div>
            <div class="flex items-center space-x-2">
                <span class="form-label">ì‚¬ìš©ìëª…</span>
                <input type="text" class="form-input w-28" id="userNameInput">
            </div>
            <div class="flex items-center space-x-2">
                <!-- ì‚¬ìš©ìê·¸ë£¹ í•„í„° ì½¤ë³´ë°•ìŠ¤ì— ìƒˆë¡œìš´ ì˜µì…˜ì„ ì ìš©í•©ë‹ˆë‹¤. -->
                <span class="form-label">ì‚¬ìš©ìê·¸ë£¹</span>
                <select class="form-input w-28" id="userGroupFilterSelect">
                    <option value="ì „ì²´">ì „ì²´</option>
                    <option value="ì‹œìŠ¤í…œê´€ë¦¬">ì‹œìŠ¤í…œê´€ë¦¬</option>
                    <option value="ì‚¬ì—…ìš´ì˜ì">ì‚¬ì—…ìš´ì˜ì</option>
                    <option value="ì‹œë„ ë‹´ë‹¹ì">ì‹œë„ ë‹´ë‹¹ì</option>
                    <option value="ì—…ë¬´ë‹´ë‹¹ì">ì—…ë¬´ë‹´ë‹¹ì</option>
                    <option value="ê¸ˆì—°ìƒë‹´ì‚¬">ê¸ˆì—°ìƒë‹´ì‚¬</option>
                    <option value="ê¸ˆì—°ì§€ë„ì›">ê¸ˆì—°ì§€ë„ì›</option>
                    <option value="ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›">ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›</option>
                    <option value="ê¸ˆì—°ì¡°ì‚¬ì›">ê¸ˆì—°ì¡°ì‚¬ì›</option>
                    <option value="í•™êµì„ ìƒë‹˜">í•™êµì„ ìƒë‹˜</option>
                    <option value="ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì">ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì</option>
                </select>
            </div>
            <div class="flex items-center space-x-2">
                <span class="form-label">ì‚¬ìš©ììœ ë¬´</span>
                <select class="form-input w-28" id="userStatusSelect">
                    <option>ì „ì²´</option>
                </select>
            </div>
        </div>

        <!-- Two Column Layout -->
        <div class="grid grid-cols-[1fr_1.15fr] md:grid-cols-[1fr_1.15fr] gap-4">
            <!-- Left Column: User List Grid -->
            <div>
                <div class="flex items-center justify-between mb-2">
                    <span class="font-bold text-lg">ì‚¬ìš©ì ë¦¬ìŠ¤íŠ¸</span>
                    <div class="flex items-center text-sm space-x-2">
                        <input type="checkbox" id="manage_target">
                        <label for="manage_target">ê´€ë¦¬ëŒ€ìƒìˆ˜</label>
                        <button class="btn btn-gray">í‡´ì‚¬ì ì¡°íšŒ</button>
                    </div>
                </div>
                <!-- ì‚¬ìš©ì ë¦¬ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•  ì˜ì—­ -->
                <div id="userListGrid" class="bg-white p-2 border border-gray-300 rounded-md overflow-y-auto" style="height: 400px;">
                    <!-- Table header -->
                    <div class="grid grid-cols-4 text-xs font-bold text-gray-700 p-2 border-b border-gray-300">
                        <div>ì‚¬ìš©ìID</div>
                        <div>ì´ë¦„</div>
                        <div>ì¡°ì§ëª…</div>
                        <div>ì‚¬ìš©ìê·¸ë£¹</div>
                    </div>
                    <!-- ë°ì´í„°ê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë  ì˜ì—­ -->
                </div>
            </div>

            <!-- Right Column: User Details and Registration Form -->
            <div>
                <!-- User Details Section -->
                <div class="form-section mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-lg">ì‚¬ìš©ì ìƒì„¸ì •ë³´</span>
                        <div class="flex items-center text-red-500 text-sm">
                            <span class="mr-1">â€»</span> ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”
                        </div>
                    </div>
                    <!-- Updated layout for user details to ensure labels are in one line -->
                    <div class="grid grid-cols-2 gap-2 text-sm items-center">
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ê³„ì •ìœ í˜•</span>
                            <select class="form-input w-3/4" id="accountTypeSelect">
                                <option>ì„ íƒ</option>
                                <option>ê°œì¸</option>
                                <option>ì¡°ì§</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">íœ´ë©´ê³„ì •</span>
                            <div class="flex w-3/4 space-x-1">
                                <button class="btn btn-gray" id="dormantBtn">í•´ì œ</button>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì—…ë¬´êµ¬ë¶„</span>
                            <!-- ì—…ë¬´êµ¬ë¶„ ì½¤ë³´ë°•ìŠ¤ì— ìƒˆë¡œìš´ ì˜µì…˜ì„ ì ìš©í•©ë‹ˆë‹¤. -->
                            <select class="form-input w-3/4" id="businessDivisionSelect">
                                <option>ì„ íƒ</option>
                                <option>ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰</option>
                                <option>êµ°ì˜ê²½ ê¸ˆì—°ì‚¬ì—…</option>
                                <option>ë‹¨ê¸°ê¸ˆì—°ìº í”„</option>
                                <option>ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤</option>
                                <option>í•™êµí¡ì—°ì˜ˆë°©ì‚¬ì—…</option>
                                <option>ë‹´ë°°ë§ˆì¼€íŒ… ëª¨ë‹ˆí„°ë§</option>
                                <option>ê¸ˆì—°ìƒë‹´ì „í™”</option>
                                <option>ê¸ˆì—°ì¹˜ë£Œ ê±´ê°•ë³´í—˜ ì§€ì›ì‚¬ì—…</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ìëª…</span>
                            <input type="text" class="form-input w-3/4" id="detailUserNameInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ìID</span>
                            <input type="text" class="form-input w-3/4" id="detailUserIdInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">I-PIN ID</span>
                            <input type="text" class="form-input w-3/4" id="ipinIdInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì¡°ì§ëª…</span>
                            <input type="text" class="form-input w-3/4" id="orgNameInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ê³ ìš©í˜•íƒœ</span>
                            <select class="form-input w-3/4" id="employmentTypeSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <!-- ì‚¬ìš©ìê·¸ë£¹ ìƒì„¸ì •ë³´ ì½¤ë³´ë°•ìŠ¤ì— ìƒˆë¡œìš´ ì˜µì…˜ì„ ì ìš©í•©ë‹ˆë‹¤. -->
                            <span class="form-label text-right w-1/4 user-group-label">ì‚¬ìš©ìê·¸ë£¹</span>
                            <select id="userGroupSelect" class="form-input w-3/4">
                                <option value="ì„ íƒ">ì„ íƒ</option>
                                <option value="ì‹œìŠ¤í…œê´€ë¦¬">ì‹œìŠ¤í…œê´€ë¦¬</option>
                                <option value="ì‚¬ì—…ìš´ì˜ì">ì‚¬ì—…ìš´ì˜ì</option>
                                <option value="ì‹œë„ ë‹´ë‹¹ì">ì‹œë„ ë‹´ë‹¹ì</option>
                                <option value="ì—…ë¬´ë‹´ë‹¹ì">ì—…ë¬´ë‹´ë‹¹ì</option>
                                <option value="ê¸ˆì—°ìƒë‹´ì‚¬">ê¸ˆì—°ìƒë‹´ì‚¬</option>
                                <option value="ê¸ˆì—°ì§€ë„ì›">ê¸ˆì—°ì§€ë„ì›</option>
                                <option value="ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›">ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›</option>
                                <option value="ê¸ˆì—°ì¡°ì‚¬ì›">ê¸ˆì—°ì¡°ì‚¬ì›</option>
                                <option value="í•™êµì„ ìƒë‹˜">í•™êµì„ ìƒë‹˜</option>
                                <option value="ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì">ìœ ì§€ë³´ìˆ˜ ë‹´ë‹¹ì</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì§ê¸‰</span>
                            <select class="form-input w-3/4" id="jobTitleSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì„±ë³„</span>
                            <select class="form-input w-3/4" id="genderSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‹ ê·œ/ê²½ë ¥</span>
                            <select class="form-input w-3/4" id="careerTypeSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ê²½ë ¥</span>
                            <input type="text" class="form-input w-1/2" id="careerInput">
                            <span class="form-label">ê°œì›”</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì§€ì†ê³ ìš©</span>
                            <select class="form-input w-3/4" id="continuousEmploymentSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì•½ê´€ë™ì˜</span>
                            <select class="form-input w-3/4" id="termsAgreementSelect">
                                <option>ë¯¸ë™ì˜</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ìœ ë¬´</span>
                            <select class="form-input w-3/4" id="usageStatusSelect">
                                <option>ì„ íƒ</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìœ </span>
                            <input type="text" class="form-input w-3/4" id="reasonInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ì‹œì‘ì¼</span>
                            <input type="text" class="form-input w-3/4" id="startDateInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì‚¬ìš©ì¢…ë£Œì¼</span>
                            <input type="text" class="form-input w-3/4" id="endDateInput">
                        </div>
                        <div class="col-span-2 text-xs text-gray-500 mt-2">
                            <span>- ëŠ” ì „ë¬¸ì¸ë ¥ í•„ìˆ˜ì…ë ¥ì…ë‹ˆë‹¤.</span>
                        </div>
                    </div>
                </div>

                <!-- ì‚¬ìš©ì(ê¸ˆì—°ìƒë‹´ì‚¬) ì¶”ê°€ì •ë³´ Section -->
                <div id="additionalInfoSection" class="form-section mb-4 hidden-section">
                    <span class="font-bold text-lg block mb-2">ì‚¬ìš©ì(ê¸ˆì—°ìƒë‹´ì‚¬) ì¶”ê°€ì •ë³´</span>
                    <div class="grid grid-cols-2 gap-2 text-sm items-center">
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ìƒë…„ì›”ì¼</span>
                            <div class="date-input-container w-3/4">
                                <input type="date" class="form-input" id="dobInput">
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì§ìœ„/ì§ê¸‰</span>
                            <input type="text" class="form-input w-3/4" id="positionInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ìµœì¢…í•™ìœ„</span>
                            <select class="form-input w-3/4" id="finalDegreeSelect">
                                <option>ì„ íƒ</option>
                                <option>ê³ ì¡¸</option>
                                <option>ëŒ€ì¡¸</option>
                                <option>ëŒ€í•™ì›ì„ì‚¬ì¡¸</option>
                                <option>ëŒ€í•™ì›ë°•ì‚¬ì¡¸</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì „ê³µë¶„ì•¼</span>
                            <select class="form-input w-3/4" id="majorFieldSelect">
                                <option>ì„ íƒ</option>
                                <option>ì˜í•™</option>
                                <option>ê°„í˜¸í•™</option>
                                <option>ë³´ê±´í•™</option>
                                <option>ìƒë‹´í•™</option>
                                <option>ì‹¬ë¦¬í•™</option>
                                <option>êµìœ¡í•™</option>
                                <option>ê¸°íƒ€</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ìƒë‹´ ê´€ë ¨ ìê²©ì¦<br>ë³´ìœ  ì—¬ë¶€</span>
                            <input type="text" class="form-input w-3/4" id="counselingLicenseInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì„œë¹„ìŠ¤ ìƒë‹´ ê²½ë ¥</span>
                            <select class="form-input w-3/4" id="serviceCareerSelect">
                                <option>ì„ íƒ</option>
                                <option>ìƒë‹´ì „í™”</option>
                                <option>ë³´ê±´ì†Œ</option>
                                <option>ê¸ˆì—°ìº í”„</option>
                                <option>ì°¾ê¸ˆ</option>
                                <option>êµ°ì˜ê²½</option>
                                <option>ë³‘ì˜ì›</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ìƒë‹´ì—…ë¬´ ì‹œì‘ì¼</span>
                            <div class="date-input-container w-3/4">
                                <input type="date" class="form-input" id="counselingStartDateInput">
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">êµìœ¡ ì´ìˆ˜ ì—¬ë¶€</span>
                            <div class="flex w-3/4 space-x-2">
                                <select id="educationSelect" class="form-input w-3/5">
                                    <option>ì„ íƒ</option>
                                    <option>ê¸°ì´ˆ</option>
                                    <option>ê¸°ë³¸</option>
                                    <option>ì‹¬í™”</option>
                                    <option>ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)</option>
                                </select>
                                <div id="fileUploadContainer" class="hidden-section flex-1">
                                    <input type="file" class="form-input">
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì „í™”ë²ˆí˜¸</span>
                            <input type="text" class="form-input w-3/4" id="phoneInput">
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="form-label text-right w-1/4">ì´ë©”ì¼</span>
                            <input type="email" class="form-input w-3/4" id="emailInput">
                        </div>
                    </div>
                </div>

                <!-- Management Target Section -->
                <div class="form-section">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-lg">ê´€ë¦¬ ëŒ€ìƒì</span>
                        <button class="btn btn-gray" id="changeCounselorBtn">ìƒë‹´ì‚¬ ë³€ê²½</button>
                    </div>
                    <!-- Placeholder for management target list -->
                    <div class="bg-white p-2 border border-gray-300 rounded-md" style="height: 200px;">
                        <!-- Table header placeholder -->
                        <div class="grid grid-cols-2 text-xs font-bold text-gray-700 p-2 border-b border-gray-300">
                            <div>ë“±ë¡ë²ˆí˜¸</div>
                            <div>ì´ë¦„</div>
                        </div>
                        <!-- Table row placeholder -->
                        <div class="grid grid-cols-2 text-xs p-2 hover:bg-gray-100">
                            <div>123456789</div>
                            <div>ê¹€ì˜í¬</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            // ì´ˆê¸° ë©”ì‹œì§€ íŒì—… ê´€ë ¨ ìš”ì†Œ
            const modal = document.getElementById('initialMessageModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const doNotShowAgainCheckbox = document.getElementById('doNotShowAgain');
            const storageKey = 'showInitialMessage';

            // í•„í„° ë° ë¦¬ìŠ¤íŠ¸ ê´€ë ¨ ìš”ì†Œ
            const newBtn = document.getElementById('newBtn');
            const searchBtn = document.getElementById('searchBtn');
            const userListGrid = document.getElementById('userListGrid');
            const userNameInput = document.getElementById('userNameInput');
            const userGroupFilterSelect = document.getElementById('userGroupFilterSelect');
            const excelBtn = document.getElementById('excelBtn'); // ì¶”ê°€ëœ ì—‘ì…€ ë²„íŠ¼ ìš”ì†Œ

            // ìƒì„¸ ì •ë³´ ë° ì¶”ê°€ ì •ë³´ ê´€ë ¨ ìš”ì†Œ
            const detailUserIdInput = document.getElementById('detailUserIdInput');
            const detailUserNameInput = document.getElementById('detailUserNameInput');
            const accountTypeSelect = document.getElementById('accountTypeSelect');
            const businessDivisionSelect = document.getElementById('businessDivisionSelect');
            const ipinIdInput = document.getElementById('ipinIdInput');
            const orgNameInput = document.getElementById('orgNameInput');
            const employmentTypeSelect = document.getElementById('employmentTypeSelect');
            const userGroupSelect = document.getElementById('userGroupSelect');
            const jobTitleSelect = document.getElementById('jobTitleSelect');
            const genderSelect = document.getElementById('genderSelect');
            const careerTypeSelect = document.getElementById('careerTypeSelect');
            const careerInput = document.getElementById('careerInput');
            const continuousEmploymentSelect = document.getElementById('continuousEmploymentSelect');
            const termsAgreementSelect = document.getElementById('termsAgreementSelect');
            const usageStatusSelect = document.getElementById('usageStatusSelect');
            const reasonInput = document.getElementById('reasonInput');
            const startDateInput = document.getElementById('startDateInput');
            const endDateInput = document.getElementById('endDateInput');
            const additionalInfoSection = document.getElementById('additionalInfoSection');
            const dobInput = document.getElementById('dobInput');
            const positionInput = document.getElementById('positionInput');
            const finalDegreeSelect = document.getElementById('finalDegreeSelect');
            const majorFieldSelect = document.getElementById('majorFieldSelect');
            const counselingLicenseInput = document.getElementById('counselingLicenseInput');
            const serviceCareerSelect = document.getElementById('serviceCareerSelect');
            const counselingStartDateInput = document.getElementById('counselingStartDateInput');
            const educationSelect = document.getElementById('educationSelect');
            const fileUploadContainer = document.getElementById('fileUploadContainer');
            const phoneInput = document.getElementById('phoneInput');
            const emailInput = document.getElementById('emailInput');

            // í…ŒìŠ¤íŠ¸ ë°ì´í„° (ì„ì‹œ ë°ì´í„°)
            const testUsers = [
                { id: 'user01', name: 'í™ê¸¸ë™', organization: 'ë³´ê±´ì†Œ', group: 'ì—…ë¬´ë‹´ë‹¹ì', accountType: 'ê°œì¸', businessDivision: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipinId: '1234-5678', employmentType: 'ì •ê·œì§', jobTitle: 'ì£¼ë¬´ê´€', gender: 'ë‚¨ì„±', careerType: 'ì‹ ê·œ', career: '6', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2023-01-01', endDate: '2024-12-31' },
                { id: 'user02', name: 'ê¹€ì² ìˆ˜', organization: 'ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', businessDivision: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipinId: '9101-1213', employmentType: 'ê³„ì•½ì§', jobTitle: 'ìƒë‹´ì‚¬', gender: 'ë‚¨ì„±', careerType: 'ê²½ë ¥', career: '12', continuousEmployment: 'ì•„ë‹ˆì˜¤', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2022-05-01', endDate: '2023-04-30', dob: '1990-03-15', position: 'ì„ ì„ ìƒë‹´ì‚¬', finalDegree: 'ëŒ€ì¡¸', majorField: 'ìƒë‹´í•™', counselingLicense: 'ìƒë‹´ì‚¬ 2ê¸‰', serviceCareer: 'ë³´ê±´ì†Œ', counselingStartDate: '2020-01-01', education: 'ê¸°ë³¸', phone: '010-1234-5678', email: 'kimcs@example.com' },
                { id: 'user03', name: 'ì´ì˜í¬', organization: 'ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ì§€ë„ì›', accountType: 'ì¡°ì§', businessDivision: 'êµ°ì˜ê²½ ê¸ˆì—°ì‚¬ì—…', ipinId: '1415-1617', employmentType: 'ì •ê·œì§', jobTitle: 'ì§€ë„ì›', gender: 'ì—¬ì„±', careerType: 'ì‹ ê·œ', career: '3', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2024-02-01', endDate: '2025-01-31' },
                { id: 'user04', name: 'ë°•ë¯¼ì¤€', organization: 'ë³‘ì›', group: 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', businessDivision: 'ë‹¨ê¸°ê¸ˆì—°ìº í”„', ipinId: '1819-2021', employmentType: 'ê³„ì•½ì§', jobTitle: 'ìƒë‹´/ì§€ë„ì›', gender: 'ë‚¨ì„±', careerType: 'ê²½ë ¥', career: '24', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2021-08-01', endDate: '2024-07-31', dob: '1985-10-20', position: 'ì´ê´„ ì±…ì„ì', finalDegree: 'ëŒ€í•™ì›ì„ì‚¬ì¡¸', majorField: 'ì˜í•™', counselingLicense: 'ì˜ì‚¬ ë©´í—ˆ', serviceCareer: 'ê¸ˆì—°ìº í”„', counselingStartDate: '2019-03-01', education: 'ì‹¬í™”', phone: '010-9876-5432', email: 'parkmj@example.com' },
                { id: 'user05', name: 'ìµœì§€í›ˆ', organization: 'í•™êµ', group: 'í•™êµì„ ìƒë‹˜', accountType: 'ì¡°ì§', businessDivision: 'í•™êµí¡ì—°ì˜ˆë°©ì‚¬ì—…', ipinId: '2223-2425', employmentType: 'ì •ê·œì§', jobTitle: 'ì„ ìƒë‹˜', gender: 'ë‚¨ì„±', careerType: 'ì‹ ê·œ', career: '1', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2024-03-01', endDate: '2025-02-28' },
                { id: 'user06', name: 'ì •í•˜ë‚˜', organization: 'ë³´ê±´ì†Œ', group: 'ì—…ë¬´ë‹´ë‹¹ì', accountType: 'ê°œì¸', businessDivision: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipinId: '2627-2829', employmentType: 'ì •ê·œì§', jobTitle: 'ì£¼ë¬´ê´€', gender: 'ì—¬ì„±', careerType: 'ê²½ë ¥', career: '36', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2020-05-10', endDate: '2025-05-09' },
                { id: 'user07', name: 'ê°•ì„œì¤€', organization: 'ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', businessDivision: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipinId: '3031-3233', employmentType: 'ê³„ì•½ì§', jobTitle: 'ìƒë‹´ì‚¬', gender: 'ë‚¨ì„±', careerType: 'ì‹ ê·œ', career: '2', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2024-01-01', endDate: '2025-12-31', dob: '1995-07-22', position: 'ìƒë‹´ì‚¬', finalDegree: 'ëŒ€ì¡¸', majorField: 'ê°„í˜¸í•™', counselingLicense: 'ê°„í˜¸ì‚¬ ë©´í—ˆ', serviceCareer: 'ìƒë‹´ì „í™”', counselingStartDate: '2024-01-01', education: 'ê¸°ì´ˆ', phone: '010-2345-6789', email: 'kangsy@example.com' },
                { id: 'user08', name: 'ìœ¤ì§€ë¯¼', organization: 'ë³‘ì›', group: 'ì—…ë¬´ë‹´ë‹¹ì', accountType: 'ì¡°ì§', businessDivision: 'ê¸ˆì—°ì¹˜ë£Œ ê±´ê°•ë³´í—˜ ì§€ì›ì‚¬ì—…', ipinId: '3435-3637', employmentType: 'ì •ê·œì§', jobTitle: 'ì½”ë””ë„¤ì´í„°', gender: 'ì—¬ì„±', careerType: 'ê²½ë ¥', career: '48', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2019-09-01', endDate: '2024-08-31' },
                { id: 'user09', name: 'ì¥ë™ê±´', organization: 'ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', businessDivision: 'ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤', ipinId: '3839-4041', employmentType: 'ê³„ì•½ì§', jobTitle: 'ì§€ë„ì›', gender: 'ë‚¨ì„±', careerType: 'ì‹ ê·œ', career: '1', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2024-04-01', endDate: '2025-03-31' },
                { id: 'user10', name: 'ì†¡í˜œêµ', organization: 'ê¸ˆì—°ìƒë‹´ì „í™”ì„¼í„°', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', businessDivision: 'ê¸ˆì—°ìƒë‹´ì „í™”', ipinId: '4243-4445', employmentType: 'ì •ê·œì§', jobTitle: 'ìƒë‹´ì‚¬', gender: 'ì—¬ì„±', careerType: 'ê²½ë ¥', career: '60', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2018-06-01', endDate: '2024-05-31', dob: '1980-11-25', position: 'ì±…ì„ ìƒë‹´ì‚¬', finalDegree: 'ëŒ€í•™ì›ì„ì‚¬ì¡¸', majorField: 'ì‹¬ë¦¬í•™', counselingLicense: 'ì„ìƒì‹¬ë¦¬ì‚¬', serviceCareer: 'ìƒë‹´ì „í™”', counselingStartDate: '2018-06-01', education: 'ì‹¬í™”', phone: '010-3456-7890', email: 'shg@example.com' },
                { id: 'user11', name: 'ì´ë¯¼í˜¸', organization: 'ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ì¡°ì‚¬ì›', accountType: 'ì¡°ì§', businessDivision: 'ë‹´ë°°ë§ˆì¼€íŒ… ëª¨ë‹ˆí„°ë§', ipinId: '4647-4849', employmentType: 'ê³„ì•½ì§', jobTitle: 'ì¡°ì‚¬ì›', gender: 'ë‚¨ì„±', careerType: 'ì‹ ê·œ', career: '0', continuousEmployment: 'ì•„ë‹ˆì˜¤', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2024-05-01', endDate: '2024-10-31' },
                { id: 'user12', name: 'ì „ì§€í˜„', organization: 'í•™êµ', group: 'í•™êµì„ ìƒë‹˜', accountType: 'ê°œì¸', businessDivision: 'í•™êµí¡ì—°ì˜ˆë°©ì‚¬ì—…', ipinId: '5051-5253', employmentType: 'ì •ê·œì§', jobTitle: 'ì„ ìƒë‹˜', gender: 'ì—¬ì„±', careerType: 'ê²½ë ¥', career: '120', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2014-03-01', endDate: '2025-02-28' },
                { id: 'user13', name: 'ê¹€íƒœí¬', organization: 'ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬', accountType: 'ê°œì¸', businessDivision: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipinId: '5455-5657', employmentType: 'ì •ê·œì§', jobTitle: 'ìƒë‹´ì‚¬', gender: 'ì—¬ì„±', careerType: 'ê²½ë ¥', career: '18', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2023-08-01', endDate: '2024-07-31', dob: '1988-09-09', position: 'ìƒë‹´ì‚¬', finalDegree: 'ëŒ€ì¡¸', majorField: 'êµìœ¡í•™', counselingLicense: 'í‰ìƒêµìœ¡ì‚¬', serviceCareer: 'ë³´ê±´ì†Œ', counselingStartDate: '2023-08-01', education: 'ê¸°ë³¸', phone: '010-4567-8901', email: 'kth@example.com' },
                { id: 'user14', name: 'ì´ë³‘í—Œ', organization: 'ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤', group: 'ì—…ë¬´ë‹´ë‹¹ì', accountType: 'ì¡°ì§', businessDivision: 'ì°¾ì•„ê°€ëŠ” ê¸ˆì—°ì„œë¹„ìŠ¤', ipinId: '5859-6061', employmentType: 'ê³„ì•½ì§', jobTitle: 'ë‹´ë‹¹ì', gender: 'ë‚¨ì„±', careerType: 'ê²½ë ¥', career: '72', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2018-01-01', endDate: '2024-12-31' },
                { id: 'user15', name: 'ì†ì˜ˆì§„', organization: 'ë³´ê±´ì†Œ', group: 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›', accountType: 'ê°œì¸', businessDivision: 'ë³´ê±´ì†Œ ê¸ˆì—°í´ë¦¬ë‹‰', ipinId: '6263-6465', employmentType: 'ì •ê·œì§', jobTitle: 'ìƒë‹´/ì§€ë„ì›', gender: 'ì—¬ì„±', careerType: 'ê²½ë ¥', career: '48', continuousEmployment: 'ì˜ˆ', termsAgreement: 'ë™ì˜', usageStatus: 'ì‚¬ìš©', reason: '', startDate: '2020-03-01', endDate: '2025-02-28', dob: '1982-01-22', position: 'ì´ê´„ ìƒë‹´ì‚¬', finalDegree: 'ëŒ€í•™ì›ì„ì‚¬ì¡¸', majorField: 'ë³´ê±´í•™', counselingLicense: 'ë³´ê±´êµìœ¡ì‚¬', serviceCareer: 'ë³´ê±´ì†Œ', counselingStartDate: '2020-03-01', education: 'ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)', phone: '010-5678-9012', email: 'syj@example.com' }
            ];

            // ë Œë”ë§ í•¨ìˆ˜
            const renderUserList = (users) => {
                userListGrid.innerHTML = '';
                const header = document.createElement('div');
                header.className = 'grid grid-cols-4 text-xs font-bold text-gray-700 p-2 border-b border-gray-300';
                header.innerHTML = `<div>ì‚¬ìš©ìID</div><div>ì´ë¦„</div><div>ì¡°ì§ëª…</div><div>ì‚¬ìš©ìê·¸ë£¹</div>`;
                userListGrid.appendChild(header);

                users.forEach(user => {
                    const row = document.createElement('div');
                    row.className = 'user-row grid grid-cols-4 text-xs p-2 border-b border-gray-200 hover:bg-gray-100';
                    row.dataset.userId = user.id;
                    row.innerHTML = `
                        <div>${user.id}</div>
                        <div>${user.name}</div>
                        <div>${user.organization}</div>
                        <div>${user.group}</div>
                    `;
                    userListGrid.appendChild(row);
                });
            };

            // ì‚¬ìš©ì ìƒì„¸ ì •ë³´ í‘œì‹œ í•¨ìˆ˜
            const displayUserDetails = (user) => {
                detailUserIdInput.value = user.id || '';
                detailUserNameInput.value = user.name || '';
                accountTypeSelect.value = user.accountType || 'ì„ íƒ';
                businessDivisionSelect.value = user.businessDivision || 'ì„ íƒ';
                ipinIdInput.value = user.ipinId || '';
                orgNameInput.value = user.organization || '';
                employmentTypeSelect.value = user.employmentType || 'ì„ íƒ';
                userGroupSelect.value = user.group || 'ì„ íƒ';
                jobTitleSelect.value = user.jobTitle || 'ì„ íƒ';
                genderSelect.value = user.gender || 'ì„ íƒ';
                careerTypeSelect.value = user.careerType || 'ì„ íƒ';
                careerInput.value = user.career || '';
                continuousEmploymentSelect.value = user.continuousEmployment || 'ì„ íƒ';
                termsAgreementSelect.value = user.termsAgreement || 'ë¯¸ë™ì˜';
                usageStatusSelect.value = user.usageStatus || 'ì„ íƒ';
                reasonInput.value = user.reason || '';
                startDateInput.value = user.startDate || '';
                endDateInput.value = user.endDate || '';

                // ì¶”ê°€ ì •ë³´ ì„¹ì…˜
                dobInput.value = user.dob || '';
                positionInput.value = user.position || '';
                finalDegreeSelect.value = user.finalDegree || 'ì„ íƒ';
                majorFieldSelect.value = user.majorField || 'ì„ íƒ';
                counselingLicenseInput.value = user.counselingLicense || '';
                serviceCareerSelect.value = user.serviceCareer || 'ì„ íƒ';
                counselingStartDateInput.value = user.counselingStartDate || '';
                educationSelect.value = user.education || 'ì„ íƒ';
                phoneInput.value = user.phone || '';
                emailInput.value = user.email || '';
                
                // ì‚¬ìš©ìê·¸ë£¹ì— ë”°ë¥¸ ì¶”ê°€ ì •ë³´ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
                if (user.group === 'ê¸ˆì—°ìƒë‹´ì‚¬' || user.group === 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›') {
                    additionalInfoSection.classList.remove('hidden-section');
                } else {
                    additionalInfoSection.classList.add('hidden-section');
                }
            };
            
            // ìƒì„¸ ì •ë³´ ì´ˆê¸°í™” í•¨ìˆ˜
            const clearUserDetails = () => {
                const allInputs = document.querySelectorAll('.form-input');
                allInputs.forEach(input => {
                    if (input.tagName === 'SELECT') {
                        input.value = input.options[0].value;
                    } else {
                        input.value = '';
                    }
                });
                // ìƒì„¸ ì •ë³´ ì„¹ì…˜ ìˆ¨ê¹€
                additionalInfoSection.classList.add('hidden-section');
                // ëª¨ë“  í–‰ì˜ ì„ íƒ ìƒíƒœ í•´ì œ
                const allRows = document.querySelectorAll('.user-row');
                allRows.forEach(row => row.classList.remove('selected'));
            };
            
            // ì´ˆê¸° ë©”ì‹œì§€ íŒì—… ì²˜ë¦¬
            if (localStorage.getItem(storageKey) !== 'false') {
                modal.style.display = 'flex';
            }
            closeModalBtn.addEventListener('click', () => {
                if (doNotShowAgainCheckbox.checked) {
                    localStorage.setItem(storageKey, 'false');
                }
                modal.style.display = 'none';
            });
            
            // ì‚¬ìš©ì ëª©ë¡ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            userListGrid.addEventListener('click', (e) => {
                const row = e.target.closest('.user-row');
                if (row) {
                    const userId = row.dataset.userId;
                    const selectedUser = testUsers.find(user => user.id === userId);
                    
                    // ëª¨ë“  í–‰ì˜ ì„ íƒ ìƒíƒœ ì´ˆê¸°í™”
                    const allRows = document.querySelectorAll('.user-row');
                    allRows.forEach(r => r.classList.remove('selected'));
                    
                    // í˜„ì¬ í´ë¦­ëœ í–‰ì— ì„ íƒ ìƒíƒœ ì ìš©
                    row.classList.add('selected');
                    
                    displayUserDetails(selectedUser);
                }
            });
            
            // 'ì‹ ê·œ' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            newBtn.addEventListener('click', () => {
                clearUserDetails();
            });

            // 'ì¡°íšŒ' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (í•„í„°ë§ ê¸°ëŠ¥)
            searchBtn.addEventListener('click', () => {
                const userName = userNameInput.value.toLowerCase();
                const userGroup = userGroupFilterSelect.value;
                
                const filteredUsers = testUsers.filter(user => {
                    const nameMatch = user.name.toLowerCase().includes(userName);
                    const groupMatch = userGroup === 'ì „ì²´' || user.group === userGroup;
                    return nameMatch && groupMatch;
                });
                
                renderUserList(filteredUsers);
                
                // í•„í„°ë§ í›„ ì²« ë²ˆì§¸ ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
                if (filteredUsers.length > 0) {
                    displayUserDetails(filteredUsers[0]);
                    userListGrid.querySelector('.user-row').classList.add('selected');
                } else {
                    // ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆì„ ê²½ìš° ìƒì„¸ ì •ë³´ ì´ˆê¸°í™”
                    clearUserDetails();
                }
            });
            
            // 'ì—‘ì…€' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ì¶”ê°€ëœ ê¸°ëŠ¥)
            excelBtn.addEventListener('click', () => {
                // CSV í—¤ë”ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
                const userHeaders = ['ì‚¬ìš©ìID', 'ì´ë¦„', 'ì¡°ì§ëª…', 'ì‚¬ìš©ìê·¸ë£¹'];
                const detailHeaders = ['ê³„ì •ìœ í˜•', 'ì—…ë¬´êµ¬ë¶„', 'ì‚¬ìš©ìID', 'I-PIN ID', 'ì¡°ì§ëª…', 'ê³ ìš©í˜•íƒœ', 'ì‚¬ìš©ìê·¸ë£¹', 'ì§ê¸‰', 'ì„±ë³„', 'ì‹ ê·œ/ê²½ë ¥', 'ê²½ë ¥', 'ì§€ì†ê³ ìš©', 'ì•½ê´€ë™ì˜', 'ì‚¬ìš©ìœ ë¬´', 'ì‚¬ìœ ', 'ì‚¬ìš©ì‹œì‘ì¼', 'ì‚¬ìš©ì¢…ë£Œì¼'];
                const additionalHeaders = ['ìƒë…„ì›”ì¼', 'ì§ìœ„/ì§ê¸‰', 'ìµœì¢…í•™ìœ„', 'ì „ê³µë¶„ì•¼', 'ìƒë‹´ ê´€ë ¨ ìê²©ì¦ ë³´ìœ  ì—¬ë¶€', 'ì„œë¹„ìŠ¤ ìƒë‹´ ê²½ë ¥', 'ìƒë‹´ì—…ë¬´ ì‹œì‘ì¼', 'êµìœ¡ ì´ìˆ˜ ì—¬ë¶€', 'ì „í™”ë²ˆí˜¸', 'ì´ë©”ì¼'];

                const allHeaders = [...userHeaders, ...detailHeaders, ...additionalHeaders];
                
                const dataToExport = testUsers.map(user => {
                    const row = [
                        user.id || '',
                        user.name || '',
                        user.organization || '',
                        user.group || '',
                        user.accountType || '',
                        user.businessDivision || '',
                        user.id || '', // ì‚¬ìš©ìID ì¤‘ë³µ
                        user.ipinId || '',
                        user.organization || '', // ì¡°ì§ëª… ì¤‘ë³µ
                        user.employmentType || '',
                        user.group || '', // ì‚¬ìš©ìê·¸ë£¹ ì¤‘ë³µ
                        user.jobTitle || '',
                        user.gender || '',
                        user.careerType || '',
                        user.career || '',
                        user.continuousEmployment || '',
                        user.termsAgreement || '',
                        user.usageStatus || '',
                        user.reason || '',
                        user.startDate || '',
                        user.endDate || '',
                        user.dob || '',
                        user.position || '',
                        user.finalDegree || '',
                        user.majorField || '',
                        user.counselingLicense || '',
                        user.serviceCareer || '',
                        user.counselingStartDate || '',
                        user.education || '',
                        user.phone || '',
                        user.email || ''
                    ];
                    // CSVì—ì„œ ì½¤ë§ˆ(,)ê°€ í¬í•¨ëœ ê°’ì€ í°ë”°ì˜´í‘œë¡œ ê°ì‹¸ì•¼ í•©ë‹ˆë‹¤.
                    return row.map(value => `"${String(value).replace(/"/g, '""')}"`).join(',');
                });

                // CSV í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°í•©í•©ë‹ˆë‹¤.
                const csvContent = [
                    allHeaders.map(header => `"${header}"`).join(','),
                    ...dataToExport
                ].join('\n');
                
                // UTF-8 BOMì„ ì¶”ê°€í•˜ì—¬ í•œê¸€ ê¹¨ì§ì„ ë°©ì§€í•©ë‹ˆë‹¤.
                const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                
                // ê°€ìƒì˜ ë§í¬ë¥¼ ìƒì„±í•˜ì—¬ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
                const link = document.createElement('a');
                link.setAttribute('href', url);
                link.setAttribute('download', 'users_all_data.csv');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });

            // ì‚¬ìš©ìê·¸ë£¹ ìƒì„¸ ì •ë³´ ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ ì´ë²¤íŠ¸ (ì¶”ê°€ ì •ë³´ ì˜ì—­ í‘œì‹œ/ìˆ¨ê¸°ê¸°)
            userGroupSelect.addEventListener('change', (e) => {
                const selectedValue = e.target.value;
                if (selectedValue === 'ê¸ˆì—°ìƒë‹´ì‚¬' || selectedValue === 'ê¸ˆì—°ìƒë‹´ì‚¬+ê¸ˆì—°ì§€ë„ì›') {
                    additionalInfoSection.classList.remove('hidden-section');
                } else {
                    additionalInfoSection.classList.add('hidden-section');
                }
            });

            // êµìœ¡ ì´ìˆ˜ ì—¬ë¶€ ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ ì´ë²¤íŠ¸ (íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ í‘œì‹œ/ìˆ¨ê¸°ê¸°)
            educationSelect.addEventListener('change', (e) => {
                if (e.target.value === 'ê¸°íƒ€(ì´ìˆ˜ì¦ ì—…ë¡œë“œ)') {
                    fileUploadContainer.classList.remove('hidden-section');
                } else {
                    fileUploadContainer.classList.add('hidden-section');
                }
            });
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë°ì´í„° ë Œë”ë§
            renderUserList(testUsers);
            if (testUsers.length > 0) {
                displayUserDetails(testUsers[0]);
                userListGrid.querySelector('.user-row').classList.add('selected');
            }
        });
    </script>
</body>
</html>
